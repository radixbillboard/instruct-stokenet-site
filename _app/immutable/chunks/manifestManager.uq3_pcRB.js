var Lt=Object.defineProperty;var Ut=(n,t,e)=>t in n?Lt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var d=(n,t,e)=>(Ut(n,typeof t!="symbol"?t+"":t,e),e);import{s as Dt,I as Ve,J as Ye,K as je,a as qe,d as Ce,f as D,L as Je,i as Bt,g as Wt,q as x,n as Xe,u as Gt,M as Qe,N as Ht,O as $e,P as K,W as c}from"./scheduler.ZqBsD1eN.js";import{t as et,g as zt,N as S,i as ot,L as Zt}from"./Button.imn1sr_n.js";import{S as Yt,i as jt}from"./index.IAr-F-G1.js";import{d as g,w as p,r as Ee}from"./index.CEWHKPF1.js";import{R as M,j as lt,k as qt,l as J,u as Le,m as re,n as Q,o as X,p as Pe,_ as Re,v as Ue,f as ut,q as dt,N as A,r as Jt,t as Xt,w as de,x as Oe,y as ce,z as me,A as Qt,V as ee,B as $t,C as es,H as ts,F as ss,G as ns,I as rs,P as as,J as is,K as os,L as ls,O as us}from"./entityCache.paPPdksK.js";import{v as De,e as ct}from"./entityProvider.G-8as3FL.js";function ds(n){let t,e,s,r,a,i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},n[7],{class:s=et("shrink-0",n[6][n[0]],n[8].class)},{role:n[1]},{"aria-label":n[5]},{viewBox:"0 0 18 20"}],o={};for(let l=0;l<i.length;l+=1)o=Ve(o,i[l]);return{c(){t=Ye("svg"),e=Ye("path"),this.h()},l(l){t=je(l,"svg",{xmlns:!0,fill:!0,class:!0,role:!0,"aria-label":!0,viewBox:!0});var u=qe(t);e=je(u,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),qe(e).forEach(Ce),u.forEach(Ce),this.h()},h(){D(e,"stroke","currentColor"),D(e,"stroke-linecap",n[2]),D(e,"stroke-linejoin",n[3]),D(e,"stroke-width",n[4]),D(e,"d","M3 8V5.828a2 2 0 0 1 .586-1.414l2.828-2.828A2 2 0 0 1 7.828 1h8.239A.969.969 0 0 1 17 2v16a.969.969 0 0 1-.933 1H3.933A.97.97 0 0 1 3 18v-2M8 1v4a1 1 0 0 1-1 1H3m-2 6h10M9.061 9.232 11.828 12l-2.767 2.768"),Je(t,o)},m(l,u){Bt(l,t,u),Wt(t,e),r||(a=[x(t,"click",n[9]),x(t,"keydown",n[10]),x(t,"keyup",n[11]),x(t,"focus",n[12]),x(t,"blur",n[13]),x(t,"mouseenter",n[14]),x(t,"mouseleave",n[15]),x(t,"mouseover",n[16]),x(t,"mouseout",n[17])],r=!0)},p(l,[u]){u&4&&D(e,"stroke-linecap",l[2]),u&8&&D(e,"stroke-linejoin",l[3]),u&16&&D(e,"stroke-width",l[4]),Je(t,o=zt(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},u&128&&l[7],u&257&&s!==(s=et("shrink-0",l[6][l[0]],l[8].class))&&{class:s},u&2&&{role:l[1]},u&32&&{"aria-label":l[5]},{viewBox:"0 0 18 20"}]))},i:Xe,o:Xe,d(l){l&&Ce(t),r=!1,Gt(a)}}}function cs(n,t,e){const s=["size","role","strokeLinecap","strokeLinejoin","strokeWidth","ariaLabel"];let r=Qe(t,s);const a=Ht("iconCtx")??{},i={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=a.size||"md"}=t,{role:l=a.role||"img"}=t,{strokeLinecap:u=a.strokeLinecap||"round"}=t,{strokeLinejoin:m=a.strokeLinejoin||"round"}=t,{strokeWidth:f=a.strokeWidth||"2"}=t,{ariaLabel:v="file import outline"}=t;function b(E){K.call(this,n,E)}function N(E){K.call(this,n,E)}function _(E){K.call(this,n,E)}function F(E){K.call(this,n,E)}function ve(E){K.call(this,n,E)}function Mt(E){K.call(this,n,E)}function Vt(E){K.call(this,n,E)}function xt(E){K.call(this,n,E)}function Kt(E){K.call(this,n,E)}return n.$$set=E=>{e(8,t=Ve(Ve({},t),$e(E))),e(7,r=Qe(t,s)),"size"in E&&e(0,o=E.size),"role"in E&&e(1,l=E.role),"strokeLinecap"in E&&e(2,u=E.strokeLinecap),"strokeLinejoin"in E&&e(3,m=E.strokeLinejoin),"strokeWidth"in E&&e(4,f=E.strokeWidth),"ariaLabel"in E&&e(5,v=E.ariaLabel)},t=$e(t),[o,l,u,m,f,v,i,r,t,b,N,_,F,ve,Mt,Vt,xt,Kt]}class bn extends Yt{constructor(t){super(),jt(this,t,cs,ds,Dt,{size:0,role:1,strokeLinecap:2,strokeLinejoin:3,strokeWidth:4,ariaLabel:5})}}const ms={withStackTrace:!1},mt=(n,t,e=ms)=>{const s=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},r=e.withStackTrace?new Error().stack:void 0;return{data:s,message:n,stack:r}};function Se(n,t,e,s){function r(a){return a instanceof e?a:new e(function(i){i(a)})}return new(e||(e=Promise))(function(a,i){function o(m){try{u(s.next(m))}catch(f){i(f)}}function l(m){try{u(s.throw(m))}catch(f){i(f)}}function u(m){m.done?a(m.value):r(m.value).then(o,l)}u((s=s.apply(n,t||[])).next())})}function tt(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],s=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(n){return this instanceof q?(this.v=n,this):new q(n)}function fs(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=e.apply(n,t||[]),r,a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(v){s[v]&&(r[v]=function(b){return new Promise(function(N,_){a.push([v,b,N,_])>1||o(v,b)})})}function o(v,b){try{l(s[v](b))}catch(N){f(a[0][3],N)}}function l(v){v.value instanceof q?Promise.resolve(v.value.v).then(u,m):f(a[0][2],v)}function u(v){o("next",v)}function m(v){o("throw",v)}function f(v,b){v(b),a.shift(),a.length&&o(a[0][0],a[0][1])}}function gs(n){var t,e;return t={},s("next"),s("throw",function(r){throw r}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(r,a){t[r]=n[r]?function(i){return(e=!e)?{value:q(n[r](i)),done:r==="return"}:a?a(i):i}:a}}function hs(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof tt=="function"?tt(n):n[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(a){e[a]=n[a]&&function(i){return new Promise(function(o,l){i=n[a](i),r(o,l,i.done,i.value)})}}function r(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}class I{constructor(t){this._promise=t}static fromSafePromise(t){const e=t.then(s=>new $(s));return new I(e)}static fromPromise(t,e){const s=t.then(r=>new $(r)).catch(r=>new te(e(r)));return new I(s)}static combine(t){return As(t)}static combineWithAllErrors(t){return ps(t)}map(t){return new I(this._promise.then(e=>Se(this,void 0,void 0,function*(){return e.isErr()?new te(e.error):new $(yield t(e.value))})))}mapErr(t){return new I(this._promise.then(e=>Se(this,void 0,void 0,function*(){return e.isOk()?new $(e.value):new te(yield t(e.error))})))}andThen(t){return new I(this._promise.then(e=>{if(e.isErr())return new te(e.error);const s=t(e.value);return s instanceof I?s._promise:s}))}orElse(t){return new I(this._promise.then(e=>Se(this,void 0,void 0,function*(){return e.isErr()?t(e.error):new $(e.value)})))}match(t,e){return this._promise.then(s=>s.match(t,e))}unwrapOr(t){return this._promise.then(e=>e.unwrapOr(t))}safeUnwrap(){return fs(this,arguments,function*(){return yield q(yield q(yield*gs(hs(yield q(this._promise.then(e=>e.safeUnwrap()))))))})}then(t,e){return this._promise.then(t,e)}}const st=n=>new I(Promise.resolve(new te(n)));I.fromPromise;I.fromSafePromise;const vs=n=>t=>[...t,n],ft=n=>n.reduce((t,e)=>t.isOk()?e.isErr()?H(e.error):t.map(vs(e.value)):t,z([])),As=n=>I.fromSafePromise(Promise.all(n)).andThen(ft),gt=n=>n.reduce((t,e)=>e.isErr()?t.isErr()?H([...t.error,e.error]):H([e.error]):t.isErr()?t:z([...t.value,e.value]),z([])),ps=n=>I.fromSafePromise(Promise.all(n)).andThen(gt);var xe;(function(n){function t(r,a){return(...i)=>{try{const o=r(...i);return z(o)}catch(o){return H(a?a(o):o)}}}n.fromThrowable=t;function e(r){return ft(r)}n.combine=e;function s(r){return gt(r)}n.combineWithAllErrors=s})(xe||(xe={}));const z=n=>new $(n),H=n=>new te(n);class ${constructor(t){this.value=t}isOk(){return!0}isErr(){return!this.isOk()}map(t){return z(t(this.value))}mapErr(t){return z(this.value)}andThen(t){return t(this.value)}orElse(t){return z(this.value)}asyncAndThen(t){return t(this.value)}asyncMap(t){return I.fromSafePromise(t(this.value))}unwrapOr(t){return this.value}match(t,e){return t(this.value)}safeUnwrap(){const t=this.value;return function*(){return t}()}_unsafeUnwrap(t){return this.value}_unsafeUnwrapErr(t){throw mt("Called `_unsafeUnwrapErr` on an Ok",this,t)}}class te{constructor(t){this.error=t}isOk(){return!1}isErr(){return!this.isOk()}map(t){return H(this.error)}mapErr(t){return H(t(this.error))}andThen(t){return H(this.error)}orElse(t){return t(this.error)}asyncAndThen(t){return st(this.error)}asyncMap(t){return st(this.error)}unwrapOr(t){return t}match(t,e){return e(this.error)}safeUnwrap(){const t=this.error;return function*(){throw yield H(t),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(t){throw mt("Called `_unsafeUnwrap` on an Err",this,t)}_unsafeUnwrapErr(t){return this.error}}xe.fromThrowable;function bs(n){const t=n.key.value,e=n.value.fields[4],s=e.fields[1],a=e.fields[5].fields[0].entries;if(s.variant_id!=="0")throw new Error("Unhandled Schema: Schema is not of expected type SchemaV1");const i=new qt(s.fields[0]),o=a.reduce((u,m)=>{const f=ks(m,i);return u[f.name]=f,u},{});return[{name:t,functions:o},i]}function ks(n,t){const e=n.key.value,[s,r,a]=n.value.fields;if(r.variant_id!=="0")throw new Error("Unhandled case TypeRef::Generic");const i=r.fields[0];if(i.variant_id!=="1")throw new Error("Unhandled case LocalTypeId::WellKnown");const o=parseInt(i.fields[0].value),l=t.extractFunctionArguments(o);if(a.variant_id!=="0")throw new Error("Unhandled case TypeRef::Generic");return{name:e,isMethod:s.variant_id==="1",args:l}}const ht=M.Utils.knownAddresses(S).then(n=>n.packageAddresses.packagePackage);async function Ns(n,t){const e=await ws(n,t);if(!e)return;const a=(await Es(e)).fields[0].entries.map(l=>bs(l)),i={},o={};for(const[l,u]of a)i[l.name]=l,o["dummy_hash_"+De()]=u;return{blueprints:i,schemas:o}}async function ws(n,t){const r={kind:"String",value:`
    ALLOCATE_GLOBAL_ADDRESS
      Address("${await ht}")
      "Package"
      AddressReservation("${t}")
      NamedAddress("${t}")
    ;
    `+n};try{return(await M.Instructions.convert(r,S,"Parsed")).value[1]}catch(a){console.log(a);return}}async function Es(n){switch(n.kind){case"CallFunction":const s=await ht;if(n.packageAddress.kind!="Static"||n.packageAddress.value!=s||n.blueprintName!="Package"||n.functionName!="publish_wasm_advanced"&&n.functionName!="publish_native")throw new Error("Passed instruction is not a publish package instruction");break;default:throw new Error("Passed instruction is not a CallFunction instruction")}const t=await M.Instructions.compile({kind:"Parsed",value:[n]},S),e=await M.ManifestSbor.decodeToString(t,S,lt.ProgrammaticJson).then(JSON.parse);return n.functionName==="publish_wasm_advanced",e.elements[0].fields[3].fields[1]}class V{constructor(){d(this,"unsubscriber")}subscribe(t,e,s){const r=Pe(this.constructFilterFunction(s));let a;this.unsubscriber=g([t,r],J).subscribe(([i,o])=>{const l=(o==null?void 0:o(i))??i;Re.isEqual(l,a)||(a=l,e.set(l))})}unsubscribe(){var t;(t=this.unsubscriber)==null||t.call(this),this.unsubscriber=void 0}}class nt extends V{constructFilterFunction(t){return p(void 0)}}class _s extends V{constructFilterFunction(t){const e=c(t.fixedArgs),s=e[0].value,r=e[1].value,a=e[2].value,i=e[3].value;return g([s.value,r.value,a.value,i.value],([o,l,u,m])=>v=>{const b=[...v];return u&&b.push({kind:"AddressReservation",name:u,packageAddress:o,blueprintName:l,namedAddressName:m,isConsumed:!1}),m&&b.push({kind:"NamedAddress",name:m,packageAddress:o,blueprintName:l,addressReservationName:u,isConsumed:!1}),b})}}class L extends V{constructor(t){super(),this.config=t}constructFilterFunction(t){let e;if(this.config.resourceAddressArgIndex!=null){const r=c(t.fixedArgs)[this.config.resourceAddressArgIndex].value;e=g(r.validStaticOrNamedAddress,async a=>{const i=await a;return(i==null?void 0:i.kind)==="static"?{entityVariant:i.entityVariant}:void 0})}else e=p(Promise.resolve({entityVariant:void 0}));const s=c(t.fixedArgs)[this.config.ownableNameArgIndex].value;return g([e,s.value],([r,a])=>{if(!a.trim())return;const i=r.then(l=>(l==null?void 0:l.entityVariant)==="FungibleResource"?"Fungible":(l==null?void 0:l.entityVariant)==="NonFungibleResource"?"NonFungible":void 0);return l=>[...l,{kind:s.valueKind.kind,name:a,resourceVariant:i,isConsumed:!1}]})}static create(t){return class extends L{constructor(){super(t)}}}}class fe extends V{constructor(t){super(),this.config=t}constructFilterFunction(t){const e=c(t.fixedArgs)[this.config.bucketNameArgIndex].value,s=c(t.fixedArgs)[this.config.proofNameArgIndex].value;return g([e.value,s.value],([r,a])=>o=>{const l=o.find(u=>u.kind==="Bucket"&&u.name===r);if((l==null?void 0:l.kind)==="Bucket"&&a){const u={kind:"Proof",name:a,resourceVariant:l.resourceVariant,isConsumed:!1};return[...o,u]}else return o})}static create(t){return class extends fe{constructor(){super(t)}}}}class Os extends V{constructFilterFunction(t){const e=c(t.fixedArgs)[0].value,s=c(t.fixedArgs)[1].value;return g([e.value,s.value],([r,a])=>o=>{const l=o.find(u=>u.kind==="Proof"&&u.name===r);if(l&&a){const u={...l,name:a};return[...o,u]}else return o})}}class vt extends V{constructFilterFunction(t){return p(e=>e.map(s=>s.kind==="Proof"?{...s,isConsumed:!0}:s))}}class Be extends V{constructFilterFunction(t){const e=c(t.fixedArgs)[0].value;return g(e.value,s=>a=>a.map(i=>i.kind===e.valueKind.kind&&i.name===s?{...i,isConsumed:!0}:i))}}class le extends V{constructFilterFunction(t){const e=le.derivePublishConstellation(t);return g(e,(s,r)=>{if(!s)return;const i=s.packageDefinitionNode.validationResult;let o=s.packageAddressNode;const l=o.validationResult;return g([i,l],J).subscribe(([u,m])=>{const f=c(o.value.values)[0];if(!f)return;const v=c(f.value),b=le.getPackageDefinition(u,m,v,t);r(_=>_.map(F=>F.kind==="AddressReservation"&&F.name===v?{...F,packageDefinition:b}:F))})},void 0)}static async getPackageDefinition(t,e,s,r){if(!((await t).valid&&(await e).valid)&&s)return;const a=await r.toManifestString();return await Ns(a,s)}static derivePublishConstellation(t){return Le(g(t.args,async e=>{const s=(await M.Utils.knownAddresses(S)).packageAddresses.packagePackage,r=c(t.command),a=await e;if(r==="PUBLISH_PACKAGE_ADVANCED"&&a.length===5)return{packageDefinitionNode:a[1].value,packageAddressNode:a[4].value};if(r==="CALL_FUNCTION"){const i=c(a[0].value.value),o=c(a[1].value.value),l=c(a[2].value.value);if(i===s&&o==="Package"&&l==="publish_wasm_advanced"&&a.length===8)return{packageDefinitionNode:a[4].value,packageAddressNode:a[7].value}}}),void 0)}}class U extends V{constructFilterFunction(t){const e=re(g(Le(t.args,[]),s=>Q(s.map(r=>r.value.consumedInputs))),J);return g(e,s=>{const r=X.flatten(s);return r.length===0?void 0:i=>i.map(o=>r.find(u=>u.kind===o.kind&&u.name===o.name)!=null?{...o,isConsumed:!0}:o)})}}class Fe extends V{constructor(e){super();d(this,"filters");this.filters=e.map(s=>new s)}constructFilterFunction(e){const s=this.filters.map(r=>r.constructFilterFunction(e));return g(s,r=>i=>{let o=i;for(const l of Q(r))o=l(o);return o})}static create(...e){return class extends Fe{constructor(){super(e)}}}}class ys{constructor(){d(this,"lastFailedLoadAttemptTimestamps",new Map);d(this,"packagesByAddress",new Map)}async getScryptoPackage(t){if(!(await Ue(t,["Package"])).valid)return;const e=new Date().getTime(),s=this.lastFailedLoadAttemptTimestamps.get(t);if(s&&e-s<ot*1e3)return;const r=this.packagesByAddress.get(t);if(r)return r;{const a=await ut.findPackage(t);if(a==null){this.lastFailedLoadAttemptTimestamps.set(t,e);return}else return this.packagesByAddress.set(t,a),a}}}const Z=new ys,rt=`${Zt}component-package-mapping`;class Ps{constructor(){d(this,"lastFailedLoadAttemptTimestamps",new Map)}async getScryptoEntityInfo(t){if(!(await Ue(t,["Component","Package","FungibleResource","NonFungibleResource","Vault"])).valid)return;const e=new Date().getTime(),s=this.lastFailedLoadAttemptTimestamps.get(t);if(s&&e-s<ot*1e3)return;const r=localStorage.getItem(rt),a=r?JSON.parse(r):{},i=a[t];if(i)return i;const o=await ut.findEntityInfo(t);if(o)return a[t]=o,localStorage.setItem(rt,JSON.stringify(a)),o;this.lastFailedLoadAttemptTimestamps.set(t,e)}}const We=new Ps;class ge{constructor(t){d(this,"argObserverUnsubscriber");d(this,"advisorUnsubscriber");this.observedArgsIndices=t}subscribe(t){const e=g([t.fixedArgs,t.variableArgs],async([s,r])=>[...s,...await r]);this.argObserverUnsubscriber=e.subscribe(async s=>{var a;(a=this.advisorUnsubscriber)==null||a.call(this);const r=await s;if(r.length>Math.max(...this.observedArgsIndices)){const i=this.observedArgsIndices.map(o=>r[o].value);this.advisorUnsubscriber=this.adviseInstruction(t,i)}})}unsubscribe(){var t,e;(t=this.advisorUnsubscriber)==null||t.call(this),(e=this.argObserverUnsubscriber)==null||e.call(this)}}class Rs extends ge{constructor(){super([0,1])}adviseInstruction(t,e){const[s,r]=e;return s.value.subscribe(async a=>{const i=await Z.getScryptoPackage(a);if(!i){r.clearOptions();return}const o=Object.keys(i.blueprints);r.setOptions(o)})}}class Fs extends ge{constructor(){super([0,1])}adviseInstruction(t,e){const[s,r]=e;return s.validStaticOrNamedAddress.subscribe(async a=>{const i=await a;if(!i){r.clearOptions();return}const[o,l]=await At(i),u=o==null?void 0:o.blueprints[l??""],m=u?Object.values(u.functions).filter(f=>f.isMethod).map(f=>f.name):void 0;m!=null?r.setOptions(m):r.clearOptions()})}}class Is extends ge{constructor(){super([0,1,2]);d(this,"previousPackageAddress");d(this,"selectedPackage")}adviseInstruction(e,s){const[r,a,i]=s;return g([r.validStaticOrNamedAddress,a.value,e.inputs],J).subscribe(async([o,l,u])=>{var N;const m=await o;if(!m){m!==this.previousPackageAddress&&(i.clearOptions(),a.clearOptions(),this.previousPackageAddress=m);return}if(m.kind==="named"){const _=u.find(F=>F.kind==="AddressReservation"&&F.namedAddressName===m.addressName);this.selectedPackage=(_==null?void 0:_.kind)==="AddressReservation"?await _.packageDefinition:void 0}else m.address!==this.previousPackageAddress&&(this.selectedPackage=await Z.getScryptoPackage(m.address),this.previousPackageAddress=m.address);const f=this.selectedPackage?Object.keys(this.selectedPackage.blueprints):void 0,v=(N=this.selectedPackage)==null?void 0:N.blueprints[l],b=v?Object.values(v.functions).filter(_=>!_.isMethod).map(_=>_.name):void 0;f!=null?a.setOptions(f):a.clearOptions(),b!=null?i.setOptions(b):i.clearOptions()})}}class Ie extends ge{constructor(t){super([t.addressArgIndex,t.methodNameArgIndex])}adviseInstruction(t,e){const[s,r]=e;return s.validStaticOrNamedAddress.subscribe(async a=>{var f;const i=await a;if(!i){r.clearOptions();return}const[o,l]=await At(i),u=(f=o==null?void 0:o.blueprints)==null?void 0:f[l??""],m=u?Object.values(u.functions).filter(v=>v.isMethod).map(v=>v.name):void 0;m!=null?r.setOptions(m):r.clearOptions()})}static create(t){return class extends Ie{constructor(){super(t)}}}}class Ts extends ge{constructor(){super([0,1,2])}adviseInstruction(t,e){const[s,r,a]=e;return g([s.value,r.value.discriminatorValue],J).subscribe(async([i,o])=>{var f,v,b;const l=(v=(f=r.valueKind.variants)==null?void 0:f.get(o??-1))==null?void 0:v.name;if(!l){a.clearOptions();return}const u=await We.getScryptoEntityInfo(i);if((u==null?void 0:u.variant)!=="Component"&&(u==null?void 0:u.variant)!=="FungibleResource"&&(u==null?void 0:u.variant)!=="NonFungibleResource"){a.clearOptions();return}const m=(b=u.roleAssignments)==null?void 0:b.entries.map(N=>N.role_key).filter(N=>N.module===l).map(N=>N.name);m?a.setOptions(m):a.clearOptions()})}}async function At(n){let t,e;if(n.kind==="named"){const s=n.packageAddress;t=s?await Z.getScryptoPackage(s):void 0,e=n.blueprintName}else{const s=await We.getScryptoEntityInfo(n.address);(s==null?void 0:s.variant)==="Component"&&(t=await Z.getScryptoPackage(s.packageAddress),e=s.blueprintName)}return[t,e]}class Te{}class O extends Te{constructor(t){super(),this.functionReference=t}getVariableArgDefinitions(t){return p(this.getVariableArgDefinitionsAsync())}async getVariableArgDefinitionsAsync(){const e=(await M.Utils.knownAddresses(S)).packageAddresses[this.functionReference.wellKnownPackageName];return(await Z.getScryptoPackage(e)).blueprints[this.functionReference.blueprintName].functions[this.functionReference.functionName].args}static create(t){return class extends O{constructor(){super(t)}}}}class Cs extends Te{constructor(){super(...arguments);d(this,"previousPackageAddress");d(this,"selectedPackage")}getVariableArgDefinitions(e){const s=c(e.fixedArgs),r=s[0].value,a=s[1].value,i=s[2].value;return g([r.validStaticOrNamedAddress,a.value,i.value,e.inputs],async([o,l,u,m])=>{var N,_;const f=await o;if(!f)return[];if(f.kind==="named"){const F=m.find(ve=>ve.kind==="AddressReservation"&&ve.namedAddressName===f.addressName);this.selectedPackage=(F==null?void 0:F.kind)==="AddressReservation"?await F.packageDefinition:void 0}else f.address!==this.previousPackageAddress&&(this.selectedPackage=await Z.getScryptoPackage(f.address),this.previousPackageAddress=f.address);const v=(N=this.selectedPackage)==null?void 0:N.blueprints[l],b=(_=v==null?void 0:v.functions)==null?void 0:_[u];return b?b.args:[]})}}class Ss extends Te{constructor(){super(...arguments);d(this,"previousPackageAddress");d(this,"selectedPackage")}getVariableArgDefinitions(e){const s=c(e.fixedArgs),r=s[0].value,a=s[1].value;return g([r.validStaticOrNamedAddress,a.value],async([i,o])=>{var v,b;const l=await i;if(!l)return[];let u;if(l.kind==="named")this.selectedPackage=l.packageAddress?await Z.getScryptoPackage(l.packageAddress):void 0,u=l.blueprintName;else{const N=await We.getScryptoEntityInfo(l.address);if((N==null?void 0:N.variant)==="Component"){const _=(N==null?void 0:N.variant)==="Component"?N.packageAddress:void 0;_&&_!==this.previousPackageAddress&&(this.selectedPackage=await Z.getScryptoPackage(_)),this.previousPackageAddress=_,u=N.blueprintName}}const m=(v=this.selectedPackage)==null?void 0:v.blueprints[u??""],f=(b=m==null?void 0:m.functions)==null?void 0:b[o];return(f==null?void 0:f.args)??[]})}}class he extends Te{constructor(t){super(),this.args=t}getVariableArgDefinitions(t){return Ee(p(Promise.resolve(this.args)))}static create(t){return class extends he{constructor(){super(t)}}}}class Ms{constructor(){d(this,"argumentDefinitionsByCommand",new Map)}registerInstruction(t,e){this.argumentDefinitionsByCommand.set(t,{args:e.args,variableArgDefinitionsProvider:e.variableArgDefinitionsProvider,consumableFilter:e.consumableFilter,instructionAdvisor:e.instructionAdvisor})}lookupInstructionDefinition(t){const e=this.argumentDefinitionsByCommand.get(t);if(e===void 0)throw new Error(`No instruction defined for command ${t}`);return e}get commands(){return[...this.argumentDefinitionsByCommand.keys()]}}const h=new Ms;h.registerInstruction("TAKE_FROM_WORKTOP",{args:[{valueKind:{kind:"Address",variants:["FungibleResource","NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Decimal"},name:"Amount"},{valueKind:{kind:"Bucket",mode:"produces",variant:"Fungible"},name:"Bucket"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:2})});h.registerInstruction("TAKE_NON_FUNGIBLES_FROM_WORKTOP",{args:[{valueKind:{kind:"Address",variants:["NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Array",valuesKind:{kind:"NonFungibleLocalId"}},name:"IDs"},{valueKind:{kind:"Bucket",mode:"produces",variant:"NonFungible"},name:"Bucket"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:2})});h.registerInstruction("TAKE_ALL_FROM_WORKTOP",{args:[{valueKind:{kind:"Address",variants:["FungibleResource","NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Bucket",mode:"produces"},name:"Bucket"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:1})});h.registerInstruction("RETURN_TO_WORKTOP",{args:[{valueKind:{kind:"Bucket",mode:"consumes"},name:"Bucket"}],consumableFilter:Be});h.registerInstruction("ASSERT_WORKTOP_CONTAINS",{args:[{valueKind:{kind:"Address",variants:["FungibleResource","NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Decimal"},name:"Amount"}]});h.registerInstruction("ASSERT_WORKTOP_CONTAINS_NON_FUNGIBLES",{args:[{valueKind:{kind:"Address",variants:["NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Array",valuesKind:{kind:"NonFungibleLocalId"}},name:"IDs"}]});h.registerInstruction("ASSERT_WORKTOP_CONTAINS_ANY",{args:[{valueKind:{kind:"Address",variants:["FungibleResource","NonFungibleResource"]},name:"Resource Address"}]});h.registerInstruction("POP_FROM_AUTH_ZONE",{args:[{valueKind:{kind:"Proof",mode:"produces"},name:"Proof"}],consumableFilter:L.create({resourceAddressArgIndex:void 0,ownableNameArgIndex:0})});h.registerInstruction("PUSH_TO_AUTH_ZONE",{args:[{valueKind:{kind:"Proof",mode:"consumes"},name:"Proof"}]});h.registerInstruction("CREATE_PROOF_FROM_AUTH_ZONE_OF_AMOUNT",{args:[{valueKind:{kind:"Address",variants:["FungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Decimal"},name:"Amount"},{valueKind:{kind:"Proof",mode:"produces",variant:"Fungible"},name:"Proof"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:2})});h.registerInstruction("CREATE_PROOF_FROM_AUTH_ZONE_OF_NON_FUNGIBLES",{args:[{valueKind:{kind:"Address",variants:["NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Array",valuesKind:{kind:"NonFungibleLocalId"}},name:"IDs"},{valueKind:{kind:"Proof",mode:"produces",variant:"NonFungible"},name:"Proof"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:2})});h.registerInstruction("CREATE_PROOF_FROM_AUTH_ZONE_OF_ALL",{args:[{valueKind:{kind:"Address",variants:["FungibleResource","NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Proof",mode:"produces"},name:"Proof"}],consumableFilter:L.create({resourceAddressArgIndex:0,ownableNameArgIndex:1})});h.registerInstruction("DROP_NAMED_PROOFS",{args:[],consumableFilter:vt});h.registerInstruction("DROP_ALL_PROOFS",{args:[],consumableFilter:vt});h.registerInstruction("DROP_AUTH_ZONE_PROOFS",{args:[]});h.registerInstruction("DROP_AUTH_ZONE_REGULAR_PROOFS",{args:[]});h.registerInstruction("DROP_AUTH_ZONE_SIGNATURE_PROOFS",{args:[]});h.registerInstruction("CREATE_PROOF_FROM_BUCKET_OF_AMOUNT",{args:[{valueKind:{kind:"Bucket",mode:"inert",variant:"Fungible"},name:"Bucket"},{valueKind:{kind:"Decimal"},name:"Amount"},{valueKind:{kind:"Proof",mode:"produces"},name:"Proof"}],consumableFilter:fe.create({bucketNameArgIndex:0,proofNameArgIndex:2})});h.registerInstruction("CREATE_PROOF_FROM_BUCKET_OF_NON_FUNGIBLES",{args:[{valueKind:{kind:"Bucket",mode:"inert",variant:"NonFungible"},name:"Bucket"},{valueKind:{kind:"Array",valuesKind:{kind:"NonFungibleLocalId"}},name:"IDs"},{valueKind:{kind:"Proof",mode:"produces"},name:"Proof"}],consumableFilter:fe.create({bucketNameArgIndex:0,proofNameArgIndex:2})});h.registerInstruction("CREATE_PROOF_FROM_BUCKET_OF_ALL",{args:[{valueKind:{kind:"Bucket",mode:"inert"},name:"Bucket"},{valueKind:{kind:"Proof",mode:"produces"},name:"Proof"}],consumableFilter:fe.create({bucketNameArgIndex:0,proofNameArgIndex:1})});h.registerInstruction("BURN_RESOURCE",{args:[{valueKind:{kind:"Bucket",mode:"consumes"},name:"Bucket"}],consumableFilter:Be});h.registerInstruction("CLONE_PROOF",{args:[{valueKind:{kind:"Proof",mode:"inert"},name:"Proof"},{valueKind:{kind:"Proof",mode:"produces"},name:"Cloned Proof"}],consumableFilter:Os});h.registerInstruction("DROP_PROOF",{args:[{valueKind:{kind:"Proof",mode:"consumes"},name:"Proof"}],consumableFilter:Be});h.registerInstruction("CALL_FUNCTION",{args:[{valueKind:{kind:"Address",variants:["Package"],allowsNamedAddress:!0},name:"Package Address"},{valueKind:{kind:"String",allowBlank:!1},name:"Blueprint name"},{valueKind:{kind:"String",allowBlank:!1},name:"Function name"}],variableArgDefinitionsProvider:Cs,consumableFilter:Fe.create(U,le),instructionAdvisor:Is});h.registerInstruction("CALL_METHOD",{args:[{valueKind:{kind:"Address",variants:["Component","FungibleResource","NonFungibleResource"],allowsNamedAddress:!0},name:"Component Address"},{valueKind:{kind:"String",allowBlank:!1},name:"Method Name"}],variableArgDefinitionsProvider:Ss,consumableFilter:U,instructionAdvisor:Fs});h.registerInstruction("ALLOCATE_GLOBAL_ADDRESS",{args:[{valueKind:{kind:"Address",variants:["Package"]},name:"Package Address"},{valueKind:{kind:"String",allowBlank:!1},name:"Blueprint Name"},{valueKind:{kind:"AddressReservation",mode:"produces"},name:"Address Reservation Name"},{valueKind:{kind:"NamedAddress",mode:"produces"},name:"Address Name"}],consumableFilter:_s,instructionAdvisor:Rs});h.registerInstruction("PUBLISH_PACKAGE_ADVANCED",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"packagePackage",blueprintName:"Package",functionName:"publish_wasm_advanced"}),consumableFilter:Fe.create(le,U)});h.registerInstruction("SET_METADATA",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Entity Address"}],variableArgDefinitionsProvider:he.create([{valueKind:{kind:"String",allowBlank:!1},name:"Field Name"},{valueKind:{kind:"WellKnownReference",name:"METADATA_VALUE"},name:"Value"}])});h.registerInstruction("LOCK_METADATA",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Address"}],variableArgDefinitionsProvider:he.create([{valueKind:{kind:"String",allowBlank:!1},name:"Field Name"}])});h.registerInstruction("REMOVE_METADATA",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Address"}],variableArgDefinitionsProvider:he.create([{valueKind:{kind:"String",allowBlank:!1},name:"Field Name"}])});h.registerInstruction("MINT_FUNGIBLE",{args:[{valueKind:{kind:"Address",variants:["FungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Decimal"},name:"Amount"}]});h.registerInstruction("MINT_NON_FUNGIBLE",{args:[{valueKind:{kind:"Address",variants:["NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Map",keysKind:{kind:"NonFungibleLocalId"},valuesKind:{kind:"Tuple"}},name:"Non Fungibles"}]});h.registerInstruction("MINT_RUID_NON_FUNGIBLE",{args:[{valueKind:{kind:"Address",variants:["NonFungibleResource"]},name:"Resource Address"},{valueKind:{kind:"Array",valuesKind:{kind:"Tuple"}},name:"Non Fungibles"}]});h.registerInstruction("CREATE_FUNGIBLE_RESOURCE",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"FungibleResourceManager",functionName:"create"}),consumableFilter:U});h.registerInstruction("CREATE_FUNGIBLE_RESOURCE_WITH_INITIAL_SUPPLY",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"FungibleResourceManager",functionName:"create_with_initial_supply"}),consumableFilter:U});h.registerInstruction("CREATE_NON_FUNGIBLE_RESOURCE",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"NonFungibleResourceManager",functionName:"create"}),consumableFilter:U});h.registerInstruction("CREATE_NON_FUNGIBLE_RESOURCE_WITH_INITIAL_SUPPLY",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"NonFungibleResourceManager",functionName:"create_with_initial_supply"}),consumableFilter:U});h.registerInstruction("RECALL_FROM_VAULT",{args:[{valueKind:{kind:"Address",variants:["Vault"]},name:"Vault Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"FungibleVault",functionName:"recall"})});h.registerInstruction("RECALL_NON_FUNGIBLES_FROM_VAULT",{args:[{valueKind:{kind:"Address",variants:["Vault"]},name:"Vault Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"NonFungibleVault",functionName:"recall_non_fungibles"})});h.registerInstruction("FREEZE_VAULT",{args:[{valueKind:{kind:"Address",variants:["Vault"]},name:"Vault Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"FungibleVault",functionName:"freeze"})});h.registerInstruction("UNFREEZE_VAULT",{args:[{valueKind:{kind:"Address",variants:["Vault"]},name:"Vault Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"resourcePackage",blueprintName:"FungibleVault",functionName:"unfreeze"})});h.registerInstruction("SET_OWNER_ROLE",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Entity Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"roleAssignmentModulePackage",blueprintName:"RoleAssignment",functionName:"set_owner"})});h.registerInstruction("LOCK_OWNER_ROLE",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Entity Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"roleAssignmentModulePackage",blueprintName:"RoleAssignment",functionName:"lock_owner"})});h.registerInstruction("SET_ROLE",{args:[{valueKind:{kind:"Address",allowsNamedAddress:!0},name:"Entity Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"roleAssignmentModulePackage",blueprintName:"RoleAssignment",functionName:"set"}),instructionAdvisor:Ts});h.registerInstruction("CREATE_ACCESS_CONTROLLER",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"accessControllerPackage",blueprintName:"AccessController",functionName:"create"}),consumableFilter:U});h.registerInstruction("SET_COMPONENT_ROYALTY",{args:[{valueKind:{kind:"Address",variants:["Component"],allowsNamedAddress:!0},name:"Component Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"royaltyModulePackage",blueprintName:"ComponentRoyalty",functionName:"set_royalty"}),instructionAdvisor:Ie.create({addressArgIndex:0,methodNameArgIndex:1})});h.registerInstruction("LOCK_COMPONENT_ROYALTY",{args:[{valueKind:{kind:"Address",variants:["Component"],allowsNamedAddress:!0},name:"Component Address"}],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"royaltyModulePackage",blueprintName:"ComponentRoyalty",functionName:"lock_royalty"}),instructionAdvisor:Ie.create({addressArgIndex:0,methodNameArgIndex:1})});h.registerInstruction("CLAIM_PACKAGE_ROYALTIES",{args:[{valueKind:{kind:"Address",variants:["Package"],allowsNamedAddress:!0},name:"Package Address"}]});h.registerInstruction("CLAIM_COMPONENT_ROYALTIES",{args:[{valueKind:{kind:"Address",variants:["Component"],allowsNamedAddress:!0},name:"Component Address"}]});h.registerInstruction("CREATE_ACCOUNT",{args:[]});h.registerInstruction("CREATE_ACCOUNT_ADVANCED",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"accountPackage",blueprintName:"Account",functionName:"create_advanced"}),consumableFilter:U});h.registerInstruction("CREATE_IDENTITY",{args:[]});h.registerInstruction("CREATE_IDENTITY_ADVANCED",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"identityPackage",blueprintName:"Identity",functionName:"create_advanced"})});h.registerInstruction("CREATE_VALIDATOR",{args:[],variableArgDefinitionsProvider:O.create({wellKnownPackageName:"consensusManagerPackage",blueprintName:"ConsensusManager",functionName:"create_validator"})});const Vs=["Any","Bool","I8","I16","I32","I64","I128","U8","U16","U32","U64","U128","String","Tuple","Enum","Array","Map","Address","NamedAddress","AddressReservation","Bucket","Proof","Expression","Blob","Decimal","PreciseDecimal","NonFungibleLocalId","NonFungibleGlobalId","Bytes","LocalSchemaReference","WellKnownReference"],kn=Vs.filter(n=>!["Any","LocalSchemaReference","WellKnownReference"].includes(n)),Nn=["Component","Package","FungibleResource","NonFungibleResource","Vault","Other"];function ye(n,t){return n.kind==="WellKnownReference"?dt(n.name,t):n.kind==="LocalSchemaReference"?n.localSchemaReference.resolveToValueKind():n}class T{constructor(t,e,s){d(this,"consumedInputs");this.valueKind=t,this.value=e,this.instruction=s}isEmbeddable(){return!1}getChildValueNodes(){return[]}}class xs extends T{constructor(e){super({kind:void 0},p(""),e);d(this,"validationResult",p(Promise.resolve(A.error({message:"Element type missing",context:"ValueNode"}))))}reset(){this.value.set("")}async toManifestString(){return"???"}initializeFromValue(e){throw new Error("Not implemented")}}class Ks extends T{constructor(e,s){super(e,p(null),s);d(this,"validationResult");this.validationResult=g(this.value,async r=>r==null?A.error({message:"Value missing",context:"ValueNode"}):r!=="true"&&r!=="false"?A.error({message:`${r} is not a valid boolean`,context:"ValueNode"}):A.ok())}reset(){this.value.set(null)}async toManifestString(){return`${c(this.value)}`}isEmbeddable(){return!0}initializeFromValue(e){this.value.set(`${e.value}`)}}class C extends T{constructor(e,s){super(e,p(""),s);d(this,"validationResult");this.validationResult=g(this.value,async r=>{if(!r)return A.error({message:"Value missing",context:"ValueNode"});try{const a=BigInt(r);return Jt.get(this.valueKind.kind).validate(a)}catch{return A.error({message:"Cannot parse integer",context:"ValueNode"})}})}reset(){this.value.set("")}async toManifestString(){return`${c(this.value)}${this.valueKind.kind.toLowerCase()}`}isEmbeddable(){return!0}initializeFromValue(e){this.value.set(e.value.toString())}}class Ls extends T{constructor(e,s){super(e,p(""),s);d(this,"options",p(void 0));d(this,"validationResult");this.validationResult=g([this.value,this.options],async([r,a])=>a!=null?a.includes(r)?A.ok():A.error({message:"Value missing",context:"ValueNode"}):this.valueKind.allowBlank||!Xt(r)?A.ok():A.error({message:"Value missing",context:"ValueNode"}))}setOptions(e){const s=e.toSorted(),r=c(this.options);if(!Re.isEqual(s,r)){this.options.set(s);const a=c(this.value);e.includes(a)||this.value.set("")}}clearOptions(){var s;(((s=c(this.options))==null?void 0:s.length)??0)!==0&&this.options.set(void 0)}reset(){this.value.set(""),this.clearOptions()}async toManifestString(){return`"${c(this.value)}"`}isEmbeddable(){return!0}initializeFromValue(e){this.value.set(e.value)}}class j extends T{constructor(e,s){var r,a;super(e,j.createNewCompositeValue(e,s),s);d(this,"canBeReplacedWithExpressionEntireWorktop");d(this,"canBeReplacedWithExpressionEntireAuthZone");d(this,"replaceWithExpressionInitial");d(this,"replaceWithExpression");d(this,"validationResult");this.canBeReplacedWithExpressionEntireWorktop=e.kind==="Array"&&((r=e.valuesKind)==null?void 0:r.kind)==="Bucket",this.canBeReplacedWithExpressionEntireAuthZone=e.kind==="Array"&&((a=e.valuesKind)==null?void 0:a.kind)==="Proof",this.replaceWithExpressionInitial=this.canBeReplacedWithExpressionEntireWorktop||this.canBeReplacedWithExpressionEntireAuthZone,this.replaceWithExpression=p(this.replaceWithExpressionInitial),this.replaceWithExpression.subscribe(i=>{i&&this.value.reset()}),this.validationResult=this.value.validationResult,this.consumedInputs=this.value.consumedInputs}get canBeReplacedWithExpression(){return this.canBeReplacedWithExpressionEntireWorktop||this.canBeReplacedWithExpressionEntireAuthZone}static createNewCompositeValue(e,s){if(e.kind==="Array")return new Us(e,s);if(e.kind==="Map")return new Ds(e,s);if(e.kind==="Tuple")return new Bs(e,s);if(e.kind==="Enum")return new Ws(e,s);throw new Error("Unhandled value kind: "+e)}reset(){this.replaceWithExpression.set(this.replaceWithExpressionInitial),this.value=j.createNewCompositeValue(this.valueKind,this.instruction)}async toManifestString(){if(c(this.replaceWithExpression)){if(this.canBeReplacedWithExpressionEntireWorktop)return'Expression("ENTIRE_WORKTOP")';if(this.canBeReplacedWithExpressionEntireAuthZone)return'Expression("ENTIRE_AUTH_ZONE")'}return this.value.toManifestString()}isEmbeddable(){var e,s;return this.valueKind.kind==="Tuple"&&((s=(e=this.valueKind)==null?void 0:e.elementKinds)==null?void 0:s.length)===1&&this.value.isEmbeddable()}initializeFromValue(e,s){e.kind==="Expression"?this.replaceWithExpression.set(!0):(this.replaceWithExpression.set(!1),this.value.initializeFromValue(e,s))}getChildValueNodes(){return this.value.getChildValueNodes().flatMap(s=>[s,...s.getChildValueNodes()])}}class Us{constructor(t,e){d(this,"valuesKind");d(this,"values");d(this,"typeNameWithGenerics");d(this,"validationResult");d(this,"consumedInputs");this.valueKind=t,this.instruction=e,this.valuesKind=p(t.valuesKind?ye(t.valuesKind,"consumes"):void 0),this.values=p([]),this.typeNameWithGenerics=g(this.valuesKind,r=>{const a=Ke(r);return`Array<${(a==null?void 0:a.kind)??"?"}>`});const s=de(this.values,r=>r.map(a=>a.validationResult));this.validationResult=g([this.valuesKind,s],async([r,a])=>Oe(r)?A.error({message:"Array type missing",context:"ValueNode"}):a),this.consumedInputs=g(re(this.values,r=>Q(r.flatMap(a=>a.consumedInputs))),X.flatten)}size(){return g(this.values,t=>t.length)}reset(){this.valuesKind.set(this.valueKind.valuesKind),this.values.set([])}async toManifestString(){let t=c(this.values);const e=c(this.valuesKind),s=(e&&pt(e))??!1;let r=(await Promise.all(t.map(async a=>s?a.toManifestString():ce(await a.toManifestString(),me)))).join(s?", ":`,
`);return!s&&t.length>0&&(r=`
${r}
`),`${c(this.typeNameWithGenerics)}(${r})`}insertNewElement(){const t=c(this.valuesKind);if(t==null)throw new Error("Cannot create a new array element when the element kind is unknown");const e=Y(t,this.instruction);return this.values.set([...c(this.values),e]),e}initializeFromValue(t,e){this.reset();for(const s of t.elements)this.insertNewElement().initializeFromValue(s,e)}getChildValueNodes(){return c(this.values)}}class Ds{constructor(t,e){d(this,"keysKind");d(this,"valuesKind");d(this,"entries");d(this,"typeNameWithGenerics");d(this,"validationResult");d(this,"consumedInputs");this.valueKind=t,this.instruction=e,this.keysKind=p(t.keysKind?ye(t.keysKind,"consumes"):void 0),this.valuesKind=p(t.valuesKind?ye(t.valuesKind,"consumes"):void 0),this.entries=p([]),this.typeNameWithGenerics=g([this.keysKind,this.valuesKind],([r,a])=>{const i=Ke(r),o=Ke(a);return`Map<${(i==null?void 0:i.kind)??"?"}, ${(o==null?void 0:o.kind)??"?"}>`});const s=de(this.entries,r=>r.flatMap(a=>[a.key.validationResult,a.value.validationResult]));this.validationResult=g([this.keysKind,this.valuesKind,s],async([r,a,i])=>{const o=[];return Oe(r)&&o.push({message:"Key type missing",context:"ValueNode"}),Oe(a)&&o.push({message:"Value type missing",context:"ValueNode"}),new A([...o,...(await i).errors])}),this.consumedInputs=g(re(this.entries,r=>r.flatMap(({key:a,value:i})=>Q([a.consumedInputs,i.consumedInputs]))),X.flatten)}size(){return g(this.entries,t=>t.length)}reset(){this.keysKind.set(this.valueKind.keysKind),this.valuesKind.set(this.valueKind.valuesKind),this.entries.set([])}async toManifestString(){const t=c(this.valuesKind),e=(t&&pt(t))??!1;let s=(await Promise.all(c(this.entries).map(async({key:r,value:a})=>{let i=`${await r.toManifestString()} => ${await a.toManifestString()}`;return e?i:ce(i,me)}))).join(e?", ":`,
`);return e&&(s=`
${s}
`),`${c(this.typeNameWithGenerics)}(${s})`}insertNewEntry(){const t=c(this.keysKind),e=c(this.valuesKind);if(t==null||e==null)throw new Error("Cannot create a new map element when the keys or values kind is unknown");const s=Y(t,this.instruction),r=Y(e,this.instruction),a={key:s,value:r};return this.entries.set([...c(this.entries),a]),a}initializeFromValue(t,e){this.reset();for(const s of t.entries){const{key:r,value:a}=this.insertNewEntry();r.initializeFromValue(s.key,e),a.initializeFromValue(s.value,e)}}getChildValueNodes(){return c(this.entries).flatMap(({key:t,value:e})=>[t,e])}}class Bs{constructor(t,e){d(this,"values");d(this,"typeNameWithGenerics",Ee(p("Tuple")));d(this,"elementKinds");d(this,"elementNames");d(this,"validationResult");d(this,"consumedInputs");var r;const s=(r=t.elementKinds)==null?void 0:r.map(a=>Y(a,e));this.values=p(s??[]),this.elementKinds=Ee(p(t.elementKinds)),this.elementNames=Ee(p(t.elementNames)),this.validationResult=de(this.values,a=>a.map(i=>i.validationResult)),this.consumedInputs=g(re(this.values,a=>Q(a.flatMap(i=>i.consumedInputs))),X.flatten)}size(){return g(this.values,t=>t.length)}reset(){c(this.values).forEach(t=>t.reset())}async toManifestString(){let t=c(this.values),e=(await Promise.all(t.map(async s=>ce(await s.toManifestString(),me)))).join(`,
`);return t.length>0&&(e=`
${e}
`),`${c(this.typeNameWithGenerics)}(${e})`}isEmbeddable(){var t;return(t=c(this.values)[0])==null?void 0:t.isEmbeddable()}initializeFromValue(t,e){const s=c(this.values),r=t.fields;for(let a=0;a<s.length;a++){const i=s[a],o=r[a];i.initializeFromValue(o,e)}}getChildValueNodes(){return c(this.values)}}class Ws{constructor(t,e){d(this,"discriminatorValue");d(this,"values");d(this,"typeNameWithGenerics");d(this,"elementKinds");d(this,"elementNames");d(this,"validationResult");d(this,"consumedInputs");this.discriminatorValue=p(void 0),this.values=p(s(c(this.discriminatorValue)??-1)??[]),this.typeNameWithGenerics=g(this.discriminatorValue,a=>{const i=a==null?void 0:a.toString();return`Enum<${Qt(i,"?")}u8>`}),this.elementKinds=g(this.discriminatorValue,a=>{var o;const i=(o=t.variants)==null?void 0:o.get(a??-1);return i==null?void 0:i.elementKinds}),this.elementNames=g(this.discriminatorValue,a=>{var o;const i=(o=t.variants)==null?void 0:o.get(a??-1);return i==null?void 0:i.elementNames}),this.discriminatorValue.subscribe(a=>{const i=s(a??-1);i!==void 0&&this.values.set(i)});function s(a){var o,l;const i=(o=t.variants)==null?void 0:o.get(a);return(l=i==null?void 0:i.elementKinds)==null?void 0:l.map(u=>Y(u,e))}const r=de(this.values,a=>a.map(i=>i.validationResult));this.validationResult=g([this.discriminatorValue,r],async([a,i])=>{if(Oe(a))return A.error({message:"Enum variant not selected",context:"ValueNode"});const l=(await Promise.all(c(this.values).map(u=>c(u.validationResult)))).flatMap(u=>u.errors);return new A(l)}),this.consumedInputs=g(re(this.values,a=>Q(a.flatMap(i=>i.consumedInputs))),X.flatten)}size(){return g(this.values,t=>t.length)}reset(){this.discriminatorValue.set(void 0),this.values.set([])}async toManifestString(){const t=c(this.values);let e=(await Promise.all(t.map(async s=>ce(await s.toManifestString(),me)))).join(`,
`);return t.length>0&&(e=`
${e}
`),`${c(this.typeNameWithGenerics)}(${e})`}initializeFromValue(t,e){this.discriminatorValue.set(t.discriminator);const s=c(this.values),r=t.fields;for(let a=0;a<s.length;a++){const i=s[a],o=r[a];i.initializeFromValue(o,e)}}getChildValueNodes(){return c(this.values)}}function pt(n){return new Set(["Bool","I8","I16","I32","I64","U8","U16","U32","U64","String"]).has(n.kind)}async function wn(n){const t=await M.ManifestSbor.decodeToString(n,S,lt.ManifestString),r={kind:"String",value:`
            CALL_FUNCTION
              Address("${(await M.Utils.knownAddresses(S)).packageAddresses.packagePackage}")
              "Package"
              "publish_wasm"
              ${t}
              Bytes("")
              Map<String, Tuple>()
            ;
        `},a=await M.Instructions.convert(r,S,"Parsed");if(a.kind!=="Parsed")throw new Error("Unreachable");const i=a.value[0];if(i.kind!=="CallFunction")throw new Error("Unreachable");if(i.args.kind!==ee.Tuple)throw new Error("Unreachable");return i.args.fields[0]}class Gs extends T{constructor(e,s){super(e,p(""),s);d(this,"validationResult");d(this,"availableAddressReservations",g(this.instruction.inputs,e=>e.filter(s=>s.kind==="NamedAddress").map(s=>s.name)));d(this,"isValueNamedAddress",g([this.value,Pe(this.instruction.inputs)],([e,s])=>s.find(r=>r.kind==="NamedAddress"&&r.name===e)!==void 0));d(this,"validStaticOrNamedAddress");this.validStaticOrNamedAddress=g([this.value,this.instruction.inputs],async([r,a])=>{var o;const i=a.find(l=>l.kind==="AddressReservation"&&l.namedAddressName===r);if((i==null?void 0:i.kind)==="AddressReservation"&&i.namedAddressName)return{kind:"named",addressName:i.namedAddressName,addressReservationName:i.name,packageAddress:i.packageAddress,blueprintName:i.blueprintName};try{const{networkId:l,entityType:u}=await M.Address.decode(r),m=$t(u);return l!==S||(o=this.valueKind.variants)!=null&&o.length&&!this.valueKind.variants.includes(m)?void 0:{kind:"static",address:r,entityVariant:m}}catch{return}}),this.validStaticOrNamedAddress.subscribe(async r=>{const a=await r;(a==null?void 0:a.kind)==="static"&&await ct.useEntity(a.address)}),this.validationResult=es([this.value,this.isValueNamedAddress],async([r,a])=>((r==null?void 0:r.trim())??"")===""?A.error({message:"Value missing",context:"ValueNode"}):a?A.ok():Ue(r,this.valueKind.variants))}reset(){this.value.set("")}async toManifestString(){var s;return((s=await c(this.validStaticOrNamedAddress))==null?void 0:s.kind)==="named"?`NamedAddress("${c(this.value)}")`:`Address("${c(this.value)}")`}isEmbeddable(){return!0}initializeFromValue(e,s){const r=e.value;r.kind==="Static"?this.value.set(r.value):this.value.set(s.idForExistingOwnable("NamedAddress",r.value))}}class Ae extends T{constructor(e,s){super(e,p(""),s);d(this,"validationResult");d(this,"selectableInputs");this.selectableInputs=g(this.instruction.inputs,r=>r.filter(a=>{const i=e.kind;return a.kind===i&&!a.isConsumed})),this.validationResult=g([this.value,s.inputs,s.manifestNode.danglingOutputs,s.argConsumedInputs],async([r,a,i,o])=>{const l=this.valueKind.kind,u=l==="Bucket"||l==="Proof"?this.valueKind.variant:void 0,m=l==="Bucket"||l==="Proof"?`${this.valueKind.variant??""}${l}`:l;if(r)if(this.valueKind.mode==="consumes"||this.valueKind.mode==="inert"){const f=a.find(b=>b.kind===l&&b.name===r),v=(f==null?void 0:f.kind)==="Bucket"||(f==null?void 0:f.kind)==="Proof"?await f.resourceVariant:void 0;return f?u&&v&&u!==v?A.error({message:`Requires a ${m} but ${l} ${r} is ${v}`,context:"ValueNode"}):f.isConsumed?A.error({message:`${m} ${r} is already consumed by another instruction`,context:"ValueNode"}):o.filter(N=>N.kind===l&&N.name===r).length>1?A.error({message:`${m} ${r} cannot be consumed multiple times`,context:"ValueNode"}):A.ok():A.error({message:`A ${m} with name ${r} is not defined`,context:"ValueNode"})}else return this.valueKind.mode==="produces"?a.find(b=>b.kind===l&&b.name===r)!=null?A.error({message:`A ${m} with name ${r} is already defined`,context:"ValueNode"}):i.find(b=>b.kind===l&&b.name===r)?A.error({message:`${m} ${r} is dangling`,context:"ValueNode"}):A.ok():A.ok();else return this.valueKind.mode==="produces"?A.error({message:"Identifier missing",context:"ValueNode"}):A.error({message:`${this.valueKind.kind} missing`,context:"ValueNode"})}),this.consumedInputs=g(this.value,r=>this.valueKind.mode==="consumes"?[{kind:this.valueKind.kind,name:r}]:[])}reset(){const e=c(this.value);Re.isEqual(e,"")||this.value.set("")}async toManifestString(){return`${this.valueKind.kind}("${c(this.value)}")`}isEmbeddable(){return!0}initializeFromValue(e,s){if(e.kind==="Bucket"?this.value.set(s.idForExistingOwnable("Bucket",e.value)):e.kind==="Proof"&&this.value.set(s.idForExistingOwnable("Proof",e.value)),e.kind==="AddressReservation"&&this.value.set(s.idForExistingOwnable("AddressReservation",e.value)),e.kind==="Address"){const r=e.value;if(r.kind!=="Named")throw new Error("Expected a named address");this.value.set(s.idForExistingOwnable("NamedAddress",r.value))}}}class Hs extends T{constructor(e,s){super(e,p(""),s);d(this,"validationResult");this.validationResult=g(this.value,async r=>{const a=["ENTIRE_WORKTOP","ENTIRE_AUTH_ZONE"];return a.includes(r)?A.ok():A.error({message:"Value must be one of "+a.join(", "),context:"ValueNode"})})}reset(){this.value.set("")}async toManifestString(){return`Expression("${c(this.value)}")`}isEmbeddable(){return!0}initializeFromValue(e,s){this.value.set(e.value)}}const zs="Input must be an string, Buffer or Uint8Array";function Zs(n){let t;if(n instanceof Uint8Array)t=n;else if(typeof n=="string")t=new TextEncoder().encode(n);else throw new Error(zs);return t}function Ys(n){return Array.prototype.map.call(n,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function pe(n){return(4294967296+n).toString(16).substring(1)}function js(n,t,e){let s=`
`+n+" = ";for(let r=0;r<t.length;r+=2){if(e===32)s+=pe(t[r]).toUpperCase(),s+=" ",s+=pe(t[r+1]).toUpperCase();else if(e===64)s+=pe(t[r+1]).toUpperCase(),s+=pe(t[r]).toUpperCase();else throw new Error("Invalid size "+e);r%6===4?s+=`
`+new Array(n.length+4).join(" "):r<t.length-2&&(s+=" ")}console.log(s)}function qs(n,t,e){let s=new Date().getTime();const r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=i%256;const a=new Date().getTime();console.log("Generated random input in "+(a-s)+"ms"),s=a;for(let i=0;i<e;i++){const o=n(r),l=new Date().getTime(),u=l-s;s=l,console.log("Hashed in "+u+"ms: "+o.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var bt={normalizeInput:Zs,toHex:Ys,debugPrint:js,testSpeed:qs};const _e=bt;function be(n,t,e){const s=n[t]+n[e];let r=n[t+1]+n[e+1];s>=4294967296&&r++,n[t]=s,n[t+1]=r}function at(n,t,e,s){let r=n[t]+e;e<0&&(r+=4294967296);let a=n[t+1]+s;r>=4294967296&&a++,n[t]=r,n[t+1]=a}function kt(n,t){return n[t]^n[t+1]<<8^n[t+2]<<16^n[t+3]<<24}function B(n,t,e,s,r,a){const i=oe[r],o=oe[r+1],l=oe[a],u=oe[a+1];be(k,n,t),at(k,n,i,o);let m=k[s]^k[n],f=k[s+1]^k[n+1];k[s]=f,k[s+1]=m,be(k,e,s),m=k[t]^k[e],f=k[t+1]^k[e+1],k[t]=m>>>24^f<<8,k[t+1]=f>>>24^m<<8,be(k,n,t),at(k,n,l,u),m=k[s]^k[n],f=k[s+1]^k[n+1],k[s]=m>>>16^f<<16,k[s+1]=f>>>16^m<<16,be(k,e,s),m=k[t]^k[e],f=k[t+1]^k[e+1],k[t]=f>>>31^m<<1,k[t+1]=m>>>31^f<<1}const Nt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Js=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],P=new Uint8Array(Js.map(function(n){return n*2})),k=new Uint32Array(32),oe=new Uint32Array(32);function wt(n,t){let e=0;for(e=0;e<16;e++)k[e]=n.h[e],k[e+16]=Nt[e];for(k[24]=k[24]^n.t,k[25]=k[25]^n.t/4294967296,t&&(k[28]=~k[28],k[29]=~k[29]),e=0;e<32;e++)oe[e]=kt(n.b,4*e);for(e=0;e<12;e++)B(0,8,16,24,P[e*16+0],P[e*16+1]),B(2,10,18,26,P[e*16+2],P[e*16+3]),B(4,12,20,28,P[e*16+4],P[e*16+5]),B(6,14,22,30,P[e*16+6],P[e*16+7]),B(0,10,20,30,P[e*16+8],P[e*16+9]),B(2,12,22,24,P[e*16+10],P[e*16+11]),B(4,14,16,26,P[e*16+12],P[e*16+13]),B(6,8,18,28,P[e*16+14],P[e*16+15]);for(e=0;e<16;e++)n.h[e]=n.h[e]^k[e]^k[e+16]}const W=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Et(n,t,e,s){if(n===0||n>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(e&&e.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(s&&s.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:n};W.fill(0),W[0]=n,t&&(W[1]=t.length),W[2]=1,W[3]=1,e&&W.set(e,32),s&&W.set(s,48);for(let a=0;a<16;a++)r.h[a]=Nt[a]^kt(W,a*4);return t&&(Ge(r,t),r.c=128),r}function Ge(n,t){for(let e=0;e<t.length;e++)n.c===128&&(n.t+=n.c,wt(n,!1),n.c=0),n.b[n.c++]=t[e]}function _t(n){for(n.t+=n.c;n.c<128;)n.b[n.c++]=0;wt(n,!0);const t=new Uint8Array(n.outlen);for(let e=0;e<n.outlen;e++)t[e]=n.h[e>>2]>>8*(e&3);return t}function Ot(n,t,e,s,r){e=e||64,n=_e.normalizeInput(n),s&&(s=_e.normalizeInput(s)),r&&(r=_e.normalizeInput(r));const a=Et(e,t,s,r);return Ge(a,n),_t(a)}function Xs(n,t,e,s,r){const a=Ot(n,t,e,s,r);return _e.toHex(a)}var Qs={blake2b:Ot,blake2bHex:Xs,blake2bInit:Et,blake2bUpdate:Ge,blake2bFinal:_t};const yt=bt;function $s(n,t){return n[t]^n[t+1]<<8^n[t+2]<<16^n[t+3]<<24}function G(n,t,e,s,r,a){w[n]=w[n]+w[t]+r,w[s]=ke(w[s]^w[n],16),w[e]=w[e]+w[s],w[t]=ke(w[t]^w[e],12),w[n]=w[n]+w[t]+a,w[s]=ke(w[s]^w[n],8),w[e]=w[e]+w[s],w[t]=ke(w[t]^w[e],7)}function ke(n,t){return n>>>t^n<<32-t}const Pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),R=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),w=new Uint32Array(16),y=new Uint32Array(16);function Rt(n,t){let e=0;for(e=0;e<8;e++)w[e]=n.h[e],w[e+8]=Pt[e];for(w[12]^=n.t,w[13]^=n.t/4294967296,t&&(w[14]=~w[14]),e=0;e<16;e++)y[e]=$s(n.b,4*e);for(e=0;e<10;e++)G(0,4,8,12,y[R[e*16+0]],y[R[e*16+1]]),G(1,5,9,13,y[R[e*16+2]],y[R[e*16+3]]),G(2,6,10,14,y[R[e*16+4]],y[R[e*16+5]]),G(3,7,11,15,y[R[e*16+6]],y[R[e*16+7]]),G(0,5,10,15,y[R[e*16+8]],y[R[e*16+9]]),G(1,6,11,12,y[R[e*16+10]],y[R[e*16+11]]),G(2,7,8,13,y[R[e*16+12]],y[R[e*16+13]]),G(3,4,9,14,y[R[e*16+14]],y[R[e*16+15]]);for(e=0;e<8;e++)n.h[e]^=w[e]^w[e+8]}function Ft(n,t){if(!(n>0&&n<=32))throw new Error("Incorrect output length, should be in [1, 32]");const e=t?t.length:0;if(t&&!(e>0&&e<=32))throw new Error("Incorrect key length, should be in [1, 32]");const s={h:new Uint32Array(Pt),b:new Uint8Array(64),c:0,t:0,outlen:n};return s.h[0]^=16842752^e<<8^n,e>0&&(He(s,t),s.c=64),s}function He(n,t){for(let e=0;e<t.length;e++)n.c===64&&(n.t+=n.c,Rt(n,!1),n.c=0),n.b[n.c++]=t[e]}function It(n){for(n.t+=n.c;n.c<64;)n.b[n.c++]=0;Rt(n,!0);const t=new Uint8Array(n.outlen);for(let e=0;e<n.outlen;e++)t[e]=n.h[e>>2]>>8*(e&3)&255;return t}function Tt(n,t,e){e=e||32,n=yt.normalizeInput(n);const s=Ft(e,t);return He(s,n),It(s)}function en(n,t,e){const s=Tt(n,t,e);return yt.toHex(s)}var tn={blake2s:Tt,blake2sHex:en,blake2sInit:Ft,blake2sUpdate:He,blake2sFinal:It};const ae=Qs,ie=tn;var sn={blake2b:ae.blake2b,blake2bHex:ae.blake2bHex,blake2bInit:ae.blake2bInit,blake2bUpdate:ae.blake2bUpdate,blake2bFinal:ae.blake2bFinal,blake2s:ie.blake2s,blake2sHex:ie.blake2sHex,blake2sInit:ie.blake2sInit,blake2sUpdate:ie.blake2sUpdate,blake2sFinal:ie.blake2sFinal};class ne extends T{constructor(e,s){super(e,p(ne.createEmptyValueForType(e.kind)),s);d(this,"allowedActualKinds");d(this,"validationResult");this.allowedActualKinds=e.kind==="Bytes"?["Bytes","Blob"]:["Blob"],this.validationResult=g(this.value,async r=>{var i;const a=this.valueKind.kind==="Bytes"?this.valueKind.length:void 0;return r.kind==="Bytes"?this.validateBytesValue(r.dataHex,a):r.kind==="Blob"?this.validateBlobValue((i=r.data)==null?void 0:i.data,a):A.error({message:"File missing",context:"ValueNode"})})}validateBytesValue(e,s){return e?ts.test(e)?s!==void 0&&e.length!==s*2?A.error({message:`Invalid length: expected ${s} bytes resp. ${s*2} hex digits but found ${e.length} hex digits`,context:"ValueNode"}):A.ok():A.error({message:"Invalid bytes hex string",context:"ValueNode"}):A.error({message:"Value missing",context:"ValueNode"})}validateBlobValue(e,s){return e==null?A.error({message:"Value missing",context:"ValueNode"}):s!==void 0&&e.length!==s?A.error({message:`Invalid length: expected ${s} bytes but found ${e.length}`,context:"ValueNode"}):A.ok()}reset(){this.reinitializeValueForType("Bytes")}reinitializeValueForType(e){this.value.set(ne.createEmptyValueForType(e))}static createEmptyValueForType(e){return e==="Bytes"?{kind:"Bytes",dataHex:""}:{kind:"Blob",data:void 0}}async toManifestString(){var s;const e=c(this.value);return e.kind==="Bytes"?`Bytes("${e.dataHex}")`:e.kind==="Blob"?`Blob("${((s=e.data)==null?void 0:s.dataHash)??""}")`:`Blob("${e.dataHash}")`}isEmbeddable(){return!1}initializeFromValue(e,s){if(e.kind==="Blob")this.value.set({kind:"ImportedBlob",dataHash:ss(e.value)});else{const r=e.elements.map(a=>{if(a.kind!==ee.U8)throw new Error("Invalid case");return a.value.toString(16).padStart(2,"0")}).join("");this.value.set({kind:"Bytes",dataHex:r})}}}class Ct{constructor(t,e,s){this.fileName=t,this.data=e,this.dataHash=s}static async fromFile(t){const e=await ns(t),s=sn.blake2bHex(e,void 0,32);return new Ct(t.name,e,s)}getDataHex(){return this.data.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}}class it extends T{constructor(e,s){super(e,p(""),s);d(this,"validationResult");this.validationResult=g(this.value,async r=>r?(this.valueKind.kind==="Decimal"?rs:as).validate(r):A.error({message:"Value missing",context:"ValueNode"}))}reset(){this.value.set("")}async toManifestString(){return`${this.valueKind.kind}("${c(this.value)}")`}isEmbeddable(){return!0}initializeFromValue(e){this.initializeFromDecimal(e.value)}initializeFromDecimal(e){this.value.set(is(e))}}const se=class se extends T{constructor(e,s){super(e,p({variant:e.variant,value:""}),s);d(this,"validationResult");this.validationResult=g(this.value,async r=>{if(r.value.trim()==="")return A.error({message:"Value missing",context:"ValueNode"});const a=r.variant;return a==null?A.error({message:"No NonFungibleLocalId variant selected",context:"ValueNode"}):os(a,r.value)})}reset(){this.value.set({variant:this.valueKind.variant,value:""})}async toManifestString(){return`NonFungibleLocalId("${se.mapNonFungibleLocalIdToString(c(this.value))}")`}static mapNonFungibleLocalIdToString(e){const[s,r]=e.variant?se.variantAffixes[e.variant]:["?","?"];return`${s}${e.value}${r}`}static parseTypeAndValue(e){const s=e[0],r=e.slice(1,-1);switch(s){case"<":return["String",r];case"#":return["Integer",r];case"[":return["Bytes",r];case"{":return["Ruid",r];default:throw new Error(`Invalid NonFungibleLocalId prefix: ${s}`)}}initializeFromValue(e,s){const[r,a]=se.parseTypeAndValue(e.value);this.value.set({variant:r,value:a})}};d(se,"variantAffixes",{String:["<",">"],Integer:["#","#"],Bytes:["[","]"],Ruid:["{","}"]});let ue=se;class ze extends T{constructor(e,s){super(e,ze.createValue(s),s);d(this,"validationResult");this.value.address.value.subscribe(async r=>{const a=c(this.value.address.value),i=await ct.useEntity(a);if(i){const o=i.details,l=c(this.value.nonFungibleLocalId.value);l.variant=o.nonFungibleIdType,this.value.nonFungibleLocalId.value.set(l),this.value.nonFungibleIdVariantSelectable.set(!1)}else this.value.nonFungibleIdVariantSelectable.set(!0)}),this.validationResult=g([this.value.address.validationResult,this.value.nonFungibleLocalId.validationResult],async([r,a])=>new A([...(await r).errors,...(await a).errors]))}reset(){this.value.nonFungibleLocalId.reset(),this.value.address.reset(),this.value.nonFungibleIdVariantSelectable.set(!0)}static createValue(e){return{address:Y({kind:"Address",variants:["NonFungibleResource"]},e),nonFungibleLocalId:Y({kind:"NonFungibleLocalId"},e),nonFungibleIdVariantSelectable:p(!0)}}async toManifestString(){const e=c(this.value.address.value),s=ue.mapNonFungibleLocalIdToString(c(this.value.nonFungibleLocalId.value));return`NonFungibleGlobalId("${e}:${s}")`}initializeFromValue(e,s){const r=e.fields[0],a=e.fields[1];if(r.kind!=="Address"||a.kind!=="NonFungibleLocalId")throw new Error("Invalid value kinds");this.value.address.initializeFromValue(r,s),this.value.nonFungibleLocalId.initializeFromValue(a,s)}}class nn{constructor(t){d(this,"command",p(void 0));d(this,"enabled",p(!0));d(this,"fixedArgs",p([]));d(this,"variableArgs",p(Promise.resolve([])));d(this,"args",g([this.fixedArgs,this.variableArgs],async([t,e])=>[...t,...await e]));d(this,"inputs",p([]));d(this,"outputs",p([]));d(this,"upstreamOutputsUnsubscriber");d(this,"consumableFilter");d(this,"instructionAdvisor");d(this,"variableArgDefinitionsProviderUnsubscriber");d(this,"id");d(this,"previousVariableArgDefs");d(this,"previousVariableArgs");d(this,"unsubscribes",[]);d(this,"validationResult");d(this,"argConsumedInputs");this.manifestNode=t,this.id=De(),this.argConsumedInputs=Pe(g(re(Le(this.variableArgs,[]),r=>Q(r.map(a=>a.value.consumedInputs))),X.flatten)),this.unsubscribes.push(this.command.subscribe(r=>{var o,l;if(!r)return;const i=h.lookupInstructionDefinition(r).args.map(u=>this.createInstructionArgument(u));this.fixedArgs.set(i),this.variableArgs.set(Promise.resolve([])),(o=this.instructionAdvisor)==null||o.unsubscribe(),(l=this.variableArgDefinitionsProviderUnsubscriber)==null||l.call(this)})),this.unsubscribes.push(g([this.command,this.fixedArgs],J).subscribe(([r,a])=>{var u;if((u=this.variableArgDefinitionsProviderUnsubscriber)==null||u.call(this),!r)return;const o=h.lookupInstructionDefinition(r).variableArgDefinitionsProvider,l=o?new o().getVariableArgDefinitions(this):void 0;this.variableArgDefinitionsProviderUnsubscriber=l==null?void 0:l.subscribe(m=>{const f=m.then(v=>{if(X.isEqual(v,this.previousVariableArgDefs))return Promise.resolve(this.previousVariableArgs);{this.previousVariableArgDefs=v;const b=v.map(N=>this.createInstructionArgument(N));return this.previousVariableArgs=b,b}});this.variableArgs.set(f)})}));let e;this.unsubscribes.push(g([this.command,this.enabled],J).subscribe(async([r,a])=>{var l,u,m;(l=this.consumableFilter)==null||l.unsubscribe(),(u=this.instructionAdvisor)==null||u.unsubscribe(),(m=this.variableArgDefinitionsProviderUnsubscriber)==null||m.call(this);const i=`${r}-${a}`;if(i===e)return;e=i;let o;if(r&&a){const f=h.lookupInstructionDefinition(r),v=f.consumableFilter;o=v?new v:new nt;const b=f.instructionAdvisor,N=b?new b:void 0;N==null||N.subscribe(this),this.instructionAdvisor=N}else o=new nt;o==null||o.subscribe(this.inputs,this.outputs,this),this.consumableFilter=o}));const s=ls(this.args,r=>r.map(a=>a.value.validationResult));this.validationResult=g([this.command,s],async([r,a])=>r?a:A.error({message:"Instruction command missing",context:"InstructionNode"}))}createInstructionArgument(t){return{value:Y(t.valueKind,this),name:t.name}}async toManifestString(){const t=c(this.command),e=[...c(this.fixedArgs),...await c(this.variableArgs)],s=(await Promise.all(e.map(async a=>{const i=await a.value.toManifestString();return`
${ce(i,me)}`}))).join(""),r=e.length===0?";":`
;`;return t+s+r}async getAllValueNodes(){const e=[...c(this.fixedArgs),...await c(this.variableArgs)].map(r=>r.value),s=e.flatMap(r=>r.getChildValueNodes());return[...e,...s]}setUpstreamOutputs(t){var e;(e=this.upstreamOutputsUnsubscriber)==null||e.call(this),this.upstreamOutputsUnsubscriber=t.subscribe(s=>{const r=c(this.inputs);Re.isEqual(s,r)||this.inputs.set(s)})}unsubscribeAll(){var t,e,s,r;this.unsubscribes.forEach(a=>a()),(t=this.upstreamOutputsUnsubscriber)==null||t.call(this),(e=this.variableArgDefinitionsProviderUnsubscriber)==null||e.call(this),(s=this.instructionAdvisor)==null||s.unsubscribe(),(r=this.consumableFilter)==null||r.unsubscribe()}}function Ke(n,t="consumes"){if(n!==void 0)return n.kind==="LocalSchemaReference"?n.localSchemaReference.resolveToValueKind():n.kind==="WellKnownReference"?dt(n.name,t):n}const rn={Any:xs,Bool:Ks,I8:C,I16:C,I32:C,I64:C,I128:C,U8:C,U16:C,U32:C,U64:C,U128:C,String:Ls,Tuple:j,Enum:j,Array:j,Map:j,Address:Gs,NamedAddress:Ae,AddressReservation:Ae,Bucket:Ae,Proof:Ae,Expression:Hs,Blob:ne,Decimal:it,PreciseDecimal:it,NonFungibleLocalId:ue,NonFungibleGlobalId:ze,Bytes:ne,LocalSchemaReference:void 0,WellKnownReference:void 0};function Y(n,t){let e=ye(n,"consumes");const s=rn[e.kind];if(s==null)throw new Error("No constructor found for value kind: "+e.kind);return Reflect.construct(s,[e,t])}class St{constructor(){d(this,"id");d(this,"label");d(this,"transactionMessage",p(""));d(this,"instructions",p([]));d(this,"enabledInstructions",an(this.instructions));d(this,"danglingOutputs",Pe(g(this.instructions,(t,e)=>{const s=t[t.length-1];if(!s){e([]);return}return s.outputs.subscribe(r=>{const a=r.filter(i=>(i.kind==="Bucket"||i.kind==="AddressReservation")&&!i.isConsumed).map(i=>({kind:i.kind,name:i.name}));e(a)})},[])));d(this,"validationResultWithoutStaticValidation",de(this.enabledInstructions,t=>t.map(e=>e.validationResult)));d(this,"validationResult",g(this.validationResultWithoutStaticValidation,async t=>{if(!(await t).valid)return t;const e=await this.toManifestString(),s=await us(e);if(s.valid)return A.ok();{const a=s.errors[0].message.replaceAll(/Radix Engine Toolkit error for invocation .* response is/g,"");let i=JSON.parse(a);for(;i.error!=null;)i=i.error;return A.error({message:i.toString(),context:"ManifestNode"})}}));this.id=De(),this.label=p("")}async toManifestString(){let t=c(this.instructions);return(await Promise.all(t.filter(e=>c(e.enabled)).filter(e=>c(e.command)).map(e=>e.toManifestString()))).join(`

`)}async getBlobs(){return(await this.getAllValueNodes()).flatMap(e=>{if(e instanceof ne){const s=c(e.value);if(s.kind==="Blob"&&s.data!=null)return[s.data.getDataHex()]}return[]})}insertNewInstruction(t){const e=c(this.instructions),s=e[t-1],r=e[t],a=new nn(this);return a.setUpstreamOutputs((s==null?void 0:s.outputs)??p([])),r&&r.setUpstreamOutputs(a.outputs),e.splice(t,0,a),this.instructions.set(e),a}removeInstructionAtIndex(t){const e=c(this.instructions),s=e[t],r=e[t-1],a=e[t+1];s.unsubscribeAll(),a&&a.setUpstreamOutputs((r==null?void 0:r.outputs)??p([])),e.splice(t,1),this.instructions.set(e)}async getAllValueNodes(){return(await Promise.all(c(this.instructions).map(t=>t.getAllValueNodes()))).flat()}}function an(n){return g(n,(t,e)=>{t.length===0&&e([]);const s=t.map(r=>r.enabled.subscribe(a=>{e(t.filter(i=>c(i.enabled)))}));return()=>s.forEach(r=>r())})}async function on(n){const t=new St,e=n.instructions;if(e.kind!=="Parsed")throw new Error("Manifest required to be in parsed form");const s=new cn;for(let r=0;r<e.value.length;r++){const a=e.value[r],i=un(a),o=t.insertNewInstruction(r);o.command.set(i),await ln(a,o,s)}return z(t)}async function ln(n,t,e){const s=c(t.fixedArgs);switch(n.kind){case"TakeAllFromWorktop":s[0].value.value.set(n.resourceAddress),s[1].value.value.set(e.idForNewlyProducedOwnable("Bucket"));break;case"TakeFromWorktop":s[0].value.value.set(n.resourceAddress),s[1].value.initializeFromDecimal(n.amount),s[2].value.value.set(e.idForNewlyProducedOwnable("Bucket"));break;case"TakeNonFungiblesFromWorktop":s[0].value.value.set(n.resourceAddress),Ne(s[1].value,n.ids),s[2].value.value.set(e.idForNewlyProducedOwnable("Bucket"));break;case"ReturnToWorktop":s[0].value.value.set(e.idForExistingOwnable("Bucket",n.bucketId));break;case"AssertWorktopContainsAny":s[0].value.value.set(n.resourceAddress);break;case"AssertWorktopContains":s[0].value.value.set(n.resourceAddress),s[1].value.initializeFromDecimal(n.amount);break;case"AssertWorktopContainsNonFungibles":s[0].value.value.set(n.resourceAddress),Ne(s[1].value,n.ids);break;case"PopFromAuthZone":s[0].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"PushToAuthZone":s[0].value.value.set(e.idForExistingOwnable("Proof",n.proofId));break;case"DropAuthZoneProofs":break;case"CreateProofFromAuthZoneOfAmount":s[0].value.value.set(n.resourceAddress),s[1].value.initializeFromDecimal(n.amount),s[2].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"CreateProofFromAuthZoneOfNonFungibles":s[0].value.value.set(n.resourceAddress);const r=s[1].value;Ne(r,n.ids),s[2].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"CreateProofFromAuthZoneOfAll":s[0].value.value.set(n.resourceAddress),s[1].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"DropNamedProofs":break;case"DropAuthZoneRegularProofs":break;case"DropAuthZoneSignatureProofs":break;case"CreateProofFromBucketOfAmount":s[0].value.value.set(e.idForExistingOwnable("Bucket",n.bucketId)),s[1].value.initializeFromDecimal(n.amount),s[2].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"CreateProofFromBucketOfNonFungibles":s[0].value.value.set(e.idForExistingOwnable("Bucket",n.bucketId)),Ne(s[1].value,n.ids),s[2].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"CreateProofFromBucketOfAll":s[0].value.value.set(e.idForExistingOwnable("Bucket",n.bucketId)),s[1].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"BurnResource":s[0].value.value.set(e.idForExistingOwnable("Bucket",n.bucketId));break;case"CloneProof":s[0].value.value.set(e.idForExistingOwnable("Proof",n.proofId)),s[1].value.value.set(e.idForNewlyProducedOwnable("Proof"));break;case"DropProof":s[0].value.value.set(e.idForExistingOwnable("Proof",n.proofId));break;case"CallFunction":if(s[0].value.value.set(Me(n.packageAddress,e)),s[1].value.value.set(n.blueprintName),s[2].value.value.set(n.functionName),n.args.kind!==ee.Tuple)throw new Error(`Invalid args kind: ${n.args.kind}`);await we(t,n.args.fields,e);break;case"CallMethod":if(s[0].value.value.set(Me(n.address,e)),s[1].value.value.set(n.methodName),n.args.kind!==ee.Tuple)throw new Error(`Invalid args kind: ${n.args.kind}`);await we(t,n.args.fields,e);break;case"CallRoyaltyMethod":case"CallMetadataMethod":case"CallRoleAssignmentMethod":if(s[0].value.value.set(Me(n.address,e)),n.args.kind!==ee.Tuple)throw new Error(`Invalid args kind: ${n.args.kind}`);await we(t,n.args.fields,e);break;case"CallDirectVaultMethod":if(s[0].value.value.set(n.address),n.args.kind!==ee.Tuple)throw new Error(`Invalid args kind: ${n.args.kind}`);await we(t,n.args.fields,e);break;case"DropAllProofs":break;case"AllocateGlobalAddress":s[0].value.value.set(n.packageAddress),s[1].value.value.set(n.blueprintName),s[2].value.value.set(e.idForNewlyProducedOwnable("AddressReservation")),s[3].value.value.set(e.idForNewlyProducedOwnable("NamedAddress"));break;default:throw new Error(`Unhandled instruction kind: ${n.kind}`)}}function un(n){if(n.kind==="CallRoyaltyMethod")switch(n.methodName){case"set_royalty":return"SET_COMPONENT_ROYALTY";case"lock_royalty":return"LOCK_COMPONENT_ROYALTY";case"claim_royalties":return"CLAIM_COMPONENT_ROYALTIES";default:throw new Error(`Unhandled CallRoyaltyMethod: ${n.methodName}`)}if(n.kind==="CallMetadataMethod")switch(n.methodName){case"set":return"SET_METADATA";case"lock":return"LOCK_METADATA";case"remove":return"REMOVE_METADATA";default:throw new Error(`Unhandled CallMetadataMethod: ${n.methodName}`)}if(n.kind==="CallRoleAssignmentMethod")switch(n.methodName){case"set":return"SET_ROLE";case"set_owner":return"SET_OWNER_ROLE";case"lock_owner":return"LOCK_OWNER_ROLE";default:throw new Error(`Unhandled CallRoleAssignmentMethod: ${n.methodName}`)}if(n.kind==="CallDirectVaultMethod")switch(n.methodName){case"freeze":return"FREEZE_VAULT";case"unfreeze":return"UNFREEZE_VAULT";case"recall":return n.args.kind==="Tuple"&&n.args.fields[0].kind==="Decimal"?"RECALL_FROM_VAULT":"RECALL_NON_FUNGIBLE";default:throw new Error(`Unhandled CallRoleAssignmentMethod: ${n.methodName}`)}return dn[n.kind]}const dn={TakeAllFromWorktop:"TAKE_ALL_FROM_WORKTOP",TakeFromWorktop:"TAKE_FROM_WORKTOP",TakeNonFungiblesFromWorktop:"TAKE_NON_FUNGIBLES_FROM_WORKTOP",ReturnToWorktop:"RETURN_TO_WORKTOP",AssertWorktopContainsAny:"ASSERT_WORKTOP_CONTAINS_ANY",AssertWorktopContains:"ASSERT_WORKTOP_CONTAINS",AssertWorktopContainsNonFungibles:"ASSERT_WORKTOP_CONTAINS_NON_FUNGIBLES",PopFromAuthZone:"POP_FROM_AUTH_ZONE",PushToAuthZone:"PUSH_TO_AUTH_ZONE",DropAuthZoneProofs:"DROP_AUTH_ZONE_PROOFS",CreateProofFromAuthZoneOfAmount:"CREATE_PROOF_FROM_AUTH_ZONE_OF_AMOUNT",CreateProofFromAuthZoneOfNonFungibles:"CREATE_PROOF_FROM_AUTH_ZONE_OF_NON_FUNGIBLES",CreateProofFromAuthZoneOfAll:"CREATE_PROOF_FROM_AUTH_ZONE_OF_ALL",DropNamedProofs:"DROP_NAMED_PROOFS",DropAuthZoneRegularProofs:"DROP_AUTH_ZONE_REGULAR_PROOFS",DropAuthZoneSignatureProofs:"DROP_AUTH_ZONE_SIGNATURE_PROOFS",CreateProofFromBucketOfAmount:"CREATE_PROOF_FROM_BUCKET_OF_AMOUNT",CreateProofFromBucketOfNonFungibles:"CREATE_PROOF_FROM_BUCKET_OF_NON_FUNGIBLES",CreateProofFromBucketOfAll:"CREATE_PROOF_FROM_BUCKET_OF_ALL",BurnResource:"BURN_RESOURCE",CloneProof:"CLONE_PROOF",DropProof:"DROP_PROOF",CallFunction:"CALL_FUNCTION",CallMethod:"CALL_METHOD",CallRoyaltyMethod:"CALL_ROYALTY_METHOD",CallMetadataMethod:"CALL_METADATA_METHOD",CallRoleAssignmentMethod:"CALL_ROLE_ASSIGNMENT_METHOD",CallDirectVaultMethod:"CALL_DIRECT_VAULT_METHOD",DropAllProofs:"DROP_ALL_PROOFS",AllocateGlobalAddress:"ALLOCATE_GLOBAL_ADDRESS"};class cn{constructor(){d(this,"ownValueCounts",new Map)}idForNewlyProducedOwnable(t){const e=this.ownValueCounts.get(t)??0;return this.ownValueCounts.set(t,e+1),`${t.toLowerCase()}_${e}`}idForExistingOwnable(t,e){return`${t.toLowerCase()}_${e}`}}function Me(n,t){return n.kind==="Static"?n.value:t.idForExistingOwnable("NamedAddress",n.value)}function Ne(n,t){const e=n.value;for(const s of t){const[r,a]=ue.parseTypeAndValue(s);e.insertNewElement().value.set({variant:r,value:a})}}async function we(n,t,e){const s=await c(n.variableArgs);for(let r=0;r<t.length;r++){const a=s[r],i=t[r];a.value.initializeFromValue(i,e)}}class Ze{constructor(){d(this,"manifestsById");d(this,"currentManifestId");d(this,"currentManifest");d(this,"manifests");this.manifestsById=p(new Map),this.currentManifestId=p(),this.currentManifest=g([this.manifestsById,this.currentManifestId],([t,e])=>{if(e==null)return;const s=t.get(e);if(s!=null)return new Promise(r=>setTimeout(()=>r(s),0))}),this.manifests=g(this.manifestsById,t=>[...t.values()])}setCurrentManifest(t){this.currentManifestId.set(t)}addNewManifest(t=!1){const e=Ze.createNewManifest(t),s=c(this.manifestsById);s.set(e.id,e),this.manifestsById.set(s),this.setCurrentManifest(e.id)}static createNewManifest(t=!1){let e=new St;return t&&e.insertNewInstruction(0),e}removeManifest(t){const e=t===c(this.currentManifestId),s=[...c(this.manifestsById).keys()].indexOf(t),r=c(this.manifestsById);if(r.delete(t),this.manifestsById.set(r),e){const a=Math.max(s-1,0),i=r.size-1,o=Math.min(a,i),l=o>=0?[...r.keys()][o]:void 0;this.setCurrentManifest(l)}}async importManifest(t,e){const r=(await on(t))._unsafeUnwrap();e!=null&&r.label.set(e);const a=c(this.manifestsById);a.set(r.id,r),this.manifestsById.set(a),this.setCurrentManifest(r.id)}}const En=new Ze;export{Us as A,Ct as B,Ws as E,bn as F,Ds as M,ue as N,cn as O,xs as P,Bs as T,kn as U,Nn as a,wn as b,Y as c,h as i,En as m};
