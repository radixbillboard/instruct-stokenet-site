class h{constructor(i){this.localSchema=i}lookupValueKind(i,a){const r=this.localSchema.fields[0].elements[i];return this.parseSchemaTypeKind(r,a)}lookupArgumentNames(i){const n=this.localSchema.fields[1].elements[i];return L(n)}lookupMetadata(i){return this.localSchema.fields[1].elements[i]}parseSchemaTypeKind(i,a){const n=P[i.variant_id];switch(n){case"Any":throw new Error("Invalid case");case"Bool":case"I8":case"I16":case"I32":case"I64":case"I128":case"U8":case"U16":case"U32":case"U64":case"U128":return{kind:n};case"String":return{kind:"String",allowBlank:!0};case"Array":const r=i.fields[0];return{kind:"Array",valuesKind:this.parseSchemaLocalKind(r,a)};case"Tuple":return{kind:"Tuple",elementKinds:i.fields[0].elements.map(N=>this.parseSchemaLocalKind(N,a))};case"Enum":return{kind:"Enum",variants:i.fields[0].entries.reduce((N,{key:C,value:l})=>{const u=parseInt(C.value),B=l.elements.map(D=>this.parseSchemaLocalKind(D,a));return N.set(u,{discriminatorValue:u,elementKinds:B}),N},new Map)};case"Map":const o=i.fields[0],R=i.fields[1];return{kind:"Map",keysKind:this.parseSchemaLocalKind(o,a),valuesKind:this.parseSchemaLocalKind(R,a)};case"Custom":return this.parseCustomTypeKind(i)}}parseSchemaLocalKind(i,a){if(i.variant_id.toString()==="0")return this.lookupWellKnownTypeId(i.fields[0].value,a);if(i.variant_id.toString()==="1"){const n=i.fields[0].value;return{kind:"LocalSchemaReference",localSchemaReference:new y(n,this,a)}}else throw new Error("Unreachable")}lookupWellKnownTypeId(i,a){return v(i,a)}parseCustomTypeKind(i){return console.log(JSON.stringify(i)),{kind:"Any"}}resolveSchemaLocalReference(i,a){var m;let n=this.parseSchemaTypeKind(this.localSchema.fields[0].elements[i],a);const r=this.lookupMetadata(i);if(n.kind==="Enum"){n.typeName=k(r);const A=p(r);if(A&&(n!=null&&n.variants))for(const[O,o]of A.entries()){const R=(m=n==null?void 0:n.variants)==null?void 0:m.get(O);R&&(R.name=o.typeName,R.elementNames=o.elementNames)}}else n.kind==="Tuple"&&(n.typeName=k(r),n.elementNames=L(r));return n}extractFunctionArguments(i){const a=this.lookupValueKind(i,"consumes");if(a.kind!=="Tuple")throw new Error("Arguments should be represented by a tuple");const n=this.lookupArgumentNames(i);return a.elementKinds.map((r,m)=>({valueKind:r,name:n[m]}))}}class y{constructor(i,a,n){this.schemaLocalIndex=i,this.schema=a,this.ownMode=n}resolveToValueKind(){return this.schema.resolveSchemaLocalReference(this.schemaLocalIndex,this.ownMode)}}function S(e,i,...a){const n=[["kind",i],...a];for(const[r,m]of n)if(e[r]!==m)throw new Error(`Field '${r}' does not have the expected value of '${m}': ${JSON.stringify(e)}`)}function k(e){const i=e.fields[0];if(S(i,"Enum"),i.variant_id.toString()!=="0")return i.fields[0].value}function L(e){let i=e.fields[1];if(S(i,"Enum"),i.variant_id.toString()!=="0")return i.fields[0].fields[0].elements.map(f)}function p(e){let i=e.fields[1];if(S(i,"Enum"),i.variant_id.toString()!=="0"){const a=new Map;return i.fields[0].fields[0].entries.forEach(({key:n,value:r})=>{const m=F(n);let A={typeName:k(r),elementNames:L(r)};a.set(m,A)}),a}}function f(e){return S(e,"String"),e.value}function F(e){return S(e,"U8"),parseInt(e.value.toString())}const P=["Any","Bool","I8","I16","I32","I64","I128","U8","U16","U32","U64","U128","String","Array","Tuple","Enum","Map","Custom"];function v(e,i){const a=T[e];return g(a,i)}function g(e,i){const n=new Map([["ANY",{kind:"Any"}],["BOOL",{kind:"Bool"}],["I8",{kind:"I8"}],["I16",{kind:"I16"}],["I32",{kind:"I32"}],["I64",{kind:"I64"}],["I128",{kind:"I128"}],["U8",{kind:"U8"}],["U16",{kind:"U16"}],["U32",{kind:"U32"}],["U64",{kind:"U64"}],["U128",{kind:"U128"}],["STRING",{kind:"String",allowBlank:!0}],["ARRAY",{kind:"Array"}],["TUPLE",{kind:"Tuple"}],["ENUM",{kind:"Enum"}],["MAP",{kind:"Map"}],["BYTES",{kind:"Bytes"}],["UNIT",{kind:"Tuple",elementKinds:[]}],["ADDRESS",{kind:"Address",allowsNamedAddress:!0}],["GLOBAL_ADDRESS",{kind:"Address",allowsNamedAddress:!0}],["INTERNAL_ADDRESS",{kind:"Address"}],["PACKAGE_ADDRESS",{kind:"Address",variants:["Package"],allowsNamedAddress:!0}],["COMPONENT_ADDRESS",{kind:"Address",variants:["Component"],allowsNamedAddress:!0}],["RESOURCE_ADDRESS",{kind:"Address",variants:["FungibleResource","NonFungibleResource"],allowsNamedAddress:!0}],["BUCKET",{kind:"Bucket",mode:i}],["FUNGIBLE_BUCKET",{kind:"Bucket",mode:i,variant:"Fungible"}],["NON_FUNGIBLE_BUCKET",{kind:"Bucket",mode:i,variant:"NonFungible"}],["PROOF",{kind:"Proof",mode:i}],["FUNGIBLE_PROOF",{kind:"Proof",mode:i,variant:"Fungible"}],["NON_FUNGIBLE_PROOF",{kind:"Proof",mode:i,variant:"NonFungible"}],["GLOBAL_ADDRESS_RESERVATION",{kind:"AddressReservation",mode:i}],["DECIMAL",{kind:"Decimal"}],["PRECISE_DECIMAL",{kind:"PreciseDecimal"}],["NON_FUNGIBLE_LOCAL_ID",{kind:"NonFungibleLocalId"}],["NON_FUNGIBLE_GLOBAL_ID",{kind:"NonFungibleGlobalId"}],["INSTANT",{kind:"Tuple",elementKinds:[{kind:"U64"}],elementNames:["seconds_since_unix_epoch"]}],["UTC_DATE_TIME",{kind:"Tuple",typeName:"UtcDateTime",elementKinds:[{kind:"U32"},{kind:"U8"},{kind:"U8"},{kind:"U8"},{kind:"U8"},{kind:"U8"}],elementNames:["year","month","day_of_month","hour","minute","second"]}],["URL",{kind:"Tuple",elementKinds:[{kind:"String",allowBlank:!0}]}],["ORIGIN",{kind:"Tuple",elementKinds:[{kind:"String",allowBlank:!0}]}],["PUBLIC_KEY",{kind:"Bytes"}],["SECP256K1_PUBLIC_KEY",{kind:"Bytes",length:33}],["ED25519_PUBLIC_KEY",{kind:"Bytes",length:32}],["PUBLIC_KEY_HASH",{kind:"Bytes",length:29}],["SECP256K1_PUBLIC_KEY_HASH",{kind:"Bytes",length:29}],["ED25519_PUBLIC_KEY_HASH",{kind:"Bytes",length:29}],["PUBLIC_KEY",{kind:"Enum",typeName:"PublicKey",variants:new Map([[0,{discriminatorValue:0,name:"Secp256k1",elementKinds:[{kind:"WellKnownReference",name:"SECP256K1_PUBLIC_KEY"}]}],[1,{discriminatorValue:1,name:"Ed25519",elementKinds:[{kind:"WellKnownReference",name:"ED25519_PUBLIC_KEY"}]}]])}],["PUBLIC_KEY_HASH",{kind:"Enum",typeName:"PublicKey",variants:new Map([[0,{discriminatorValue:0,name:"Secp256k1",elementKinds:[{kind:"WellKnownReference",name:"SECP256K1_PUBLIC_KEY_HASH"}]}],[1,{discriminatorValue:1,name:"Ed25519",elementKinds:[{kind:"WellKnownReference",name:"ED25519_PUBLIC_KEY_HASH"}]}]])}],["ACCESS_RULE",{kind:"Enum",typeName:"AccessRule",variants:new Map([[0,{discriminatorValue:0,name:"AllowAll",elementKinds:[]}],[1,{discriminatorValue:1,name:"DenyAll",elementKinds:[]}],[2,{discriminatorValue:2,name:"Protected",elementKinds:[{kind:"WellKnownReference",name:"ACCESS_RULE_NODE"}]}]])}],["ACCESS_RULE_NODE",{kind:"Enum",typeName:"AccessRuleNode",variants:new Map([[0,{discriminatorValue:0,name:"ProofRule",elementKinds:[{kind:"WellKnownReference",name:"PROOF_RULE"}]}],[1,{discriminatorValue:1,name:"AnyOf",elementKinds:[{kind:"WellKnownReference",name:"ACCESS_RULE_NODE_LIST"}]}],[2,{discriminatorValue:2,name:"AllOf",elementKinds:[{kind:"WellKnownReference",name:"ACCESS_RULE_NODE_LIST"}]}]])}],["ACCESS_RULE_NODE_LIST",{kind:"Array",valuesKind:{kind:"WellKnownReference",name:"ACCESS_RULE_NODE"}}],["PROOF_RULE",{kind:"Enum",typeName:"ProofRule",variants:new Map([[0,{discriminatorValue:0,name:"Require",elementKinds:[{kind:"WellKnownReference",name:"RESOURCE_OR_NON_FUNGIBLE"}]}],[1,{discriminatorValue:1,name:"AmountOf",elementKinds:[{kind:"Decimal"},{kind:"Address",variants:["FungibleResource","NonFungibleResource"],allowsNamedAddress:!0}]}],[2,{discriminatorValue:2,name:"CountOf",elementKinds:[{kind:"U8"},{kind:"WellKnownReference",name:"RESOURCE_OR_NON_FUNGIBLE_LIST"}]}],[3,{discriminatorValue:3,name:"AllOf",elementKinds:[{kind:"WellKnownReference",name:"RESOURCE_OR_NON_FUNGIBLE_LIST"}]}],[4,{discriminatorValue:4,name:"AnyOf",elementKinds:[{kind:"WellKnownReference",name:"RESOURCE_OR_NON_FUNGIBLE_LIST"}]}]])}],["RESOURCE_OR_NON_FUNGIBLE",{kind:"Enum",typeName:"ResourceOrNonFungible",variants:new Map([[0,{discriminatorValue:0,name:"NonFungible",elementKinds:[{kind:"NonFungibleGlobalId"}]}],[1,{discriminatorValue:1,name:"Resource",elementKinds:[{kind:"Address",variants:["FungibleResource","NonFungibleResource"],allowsNamedAddress:!0}]}]])}],["RESOURCE_OR_NON_FUNGIBLE_LIST",{kind:"Array",valuesKind:{kind:"WellKnownReference",name:"RESOURCE_OR_NON_FUNGIBLE"}}],["OWNER_ROLE",{kind:"Enum",typeName:"OwnerRole",variants:new Map([[0,{discriminatorValue:0,name:"None",elementKinds:[]}],[1,{discriminatorValue:1,name:"Fixed",elementKinds:[{kind:"WellKnownReference",name:"ACCESS_RULE"}]}],[2,{discriminatorValue:2,name:"Updatable",elementKinds:[{kind:"WellKnownReference",name:"ACCESS_RULE"}]}]])}],["ROLE_KEY",{kind:"String",allowBlank:!1}],["MODULE_ID",{kind:"Enum",typeName:"ModuleId",variants:new Map([[0,{discriminatorValue:0,name:"Main",elementKinds:[]}],[1,{discriminatorValue:1,name:"Metadata",elementKinds:[]}],[2,{discriminatorValue:2,name:"Royalty",elementKinds:[]}],[3,{discriminatorValue:3,name:"RoleAssignment",elementKinds:[]}]])}],["ATTACHED_MODULE_ID",{kind:"Enum",typeName:"AttachedModuleId",variants:new Map([[1,{discriminatorValue:1,name:"Metadata",elementKinds:[]}],[2,{discriminatorValue:2,name:"Royalty",elementKinds:[]}],[3,{discriminatorValue:3,name:"RoleAssignment",elementKinds:[]}]])}],["ROYALTY_AMOUNT",{kind:"Enum",typeName:"RoyaltyAmount",variants:new Map([[0,{discriminatorValue:0,name:"Free",elementKinds:[]}],[1,{discriminatorValue:1,name:"Xrd",elementKinds:[{kind:"Decimal"}]}],[2,{discriminatorValue:2,name:"Usd",elementKinds:[{kind:"Decimal"}]}]])}],["METADATA_VALUE",{kind:"Enum",typeName:"RoyaltyAmount",variants:new Map([[0,{discriminatorValue:0,name:"String",elementKinds:[{kind:"String",allowBlank:!0}]}],[1,{discriminatorValue:1,name:"Bool",elementKinds:[{kind:"Bool"}]}],[2,{discriminatorValue:2,name:"U8",elementKinds:[{kind:"U8"}]}],[3,{discriminatorValue:3,name:"U32",elementKinds:[{kind:"U32"}]}],[4,{discriminatorValue:4,name:"U64",elementKinds:[{kind:"U64"}]}],[5,{discriminatorValue:5,name:"I32",elementKinds:[{kind:"I32"}]}],[6,{discriminatorValue:6,name:"I64",elementKinds:[{kind:"I64"}]}],[7,{discriminatorValue:7,name:"Decimal",elementKinds:[{kind:"Decimal"}]}],[8,{discriminatorValue:8,name:"GlobalAddress",elementKinds:[{kind:"Address"}]}],[9,{discriminatorValue:9,name:"PublicKey",elementKinds:[{kind:"WellKnownReference",name:"PUBLIC_KEY"}]}],[10,{discriminatorValue:10,name:"NonFungibleGlobalId",elementKinds:[{kind:"NonFungibleGlobalId"}]}],[11,{discriminatorValue:11,name:"NonFungibleLocalId",elementKinds:[{kind:"NonFungibleLocalId"}]}],[12,{discriminatorValue:12,name:"Instant",elementKinds:[{kind:"U64"}]}],[13,{discriminatorValue:13,name:"Url",elementKinds:[{kind:"String",allowBlank:!0}]}],[14,{discriminatorValue:14,name:"Origin",elementKinds:[{kind:"String",allowBlank:!0}]}],[15,{discriminatorValue:15,name:"PublicKeyHash",elementKinds:[{kind:"WellKnownReference",name:"PUBLIC_KEY_HASH"}]}],[128,{discriminatorValue:128,name:"StringArray",elementKinds:[{kind:"Array",valuesKind:{kind:"String",allowBlank:!0}}]}],[129,{discriminatorValue:129,name:"BoolArray",elementKinds:[{kind:"Array",valuesKind:{kind:"Bool"}}]}],[130,{discriminatorValue:130,name:"U8Array",elementKinds:[{kind:"Array",valuesKind:{kind:"U8"}}]}],[131,{discriminatorValue:131,name:"U32Array",elementKinds:[{kind:"Array",valuesKind:{kind:"U32"}}]}],[132,{discriminatorValue:132,name:"U64Array",elementKinds:[{kind:"Array",valuesKind:{kind:"U64"}}]}],[133,{discriminatorValue:133,name:"I32Array",elementKinds:[{kind:"Array",valuesKind:{kind:"I32"}}]}],[134,{discriminatorValue:134,name:"I64Array",elementKinds:[{kind:"Array",valuesKind:{kind:"I64"}}]}],[135,{discriminatorValue:135,name:"DecimalArray",elementKinds:[{kind:"Array",valuesKind:{kind:"Decimal"}}]}],[136,{discriminatorValue:136,name:"GlobalAddressArray",elementKinds:[{kind:"Array",valuesKind:{kind:"Address"}}]}],[137,{discriminatorValue:137,name:"PublicKeyArray",elementKinds:[{kind:"Array",valuesKind:{kind:"WellKnownReference",name:"PUBLIC_KEY"}}]}],[138,{discriminatorValue:138,name:"NonFungibleGlobalIdArray",elementKinds:[{kind:"Array",valuesKind:{kind:"NonFungibleGlobalId"}}]}],[139,{discriminatorValue:139,name:"NonFungibleLocalIdArray",elementKinds:[{kind:"Array",valuesKind:{kind:"NonFungibleLocalId"}}]}],[140,{discriminatorValue:140,name:"InstantArray",elementKinds:[{kind:"Array",valuesKind:{kind:"U64"}}]}],[141,{discriminatorValue:141,name:"UrlArray",elementKinds:[{kind:"Array",valuesKind:{kind:"String",allowBlank:!0}}]}],[142,{discriminatorValue:142,name:"OriginArray",elementKinds:[{kind:"Array",valuesKind:{kind:"String",allowBlank:!0}}]}],[143,{discriminatorValue:143,name:"PublicKeyHashArray",elementKinds:[{kind:"Array",valuesKind:{kind:"WellKnownReference",name:"PUBLIC_KEY_HASH"}}]}]])}],["MINT_ROLES",E("MintRoles","minter")],["BURN_ROLES",E("BurnRoles","burner")],["FREEZE_ROLES",E("FreezeRoles","freezer")],["RECALL_ROLES",E("RecallRoles","recaller")],["WITHDRAW_ROLES",E("WithdrawRoles","withdrawer")],["DEPOSIT_ROLES",E("DepositRoles","depositor")],["NON_FUNGIBLE_DATA_UPDATER_ROLES",E("NonFungibleDataUpdateRoles","non_fungible_data_updater")]]).get(e);if(n===void 0)throw new Error(`Currently value kind ${e} is not handled. This is a bug and needs to be fixed`);return n}function E(e,i){return I({kind:"Tuple",typeName:e,elementKinds:[I({kind:"WellKnownReference",name:"ACCESS_RULE"}),I({kind:"WellKnownReference",name:"ACCESS_RULE"})],elementNames:[i,`${i}_updater`]})}const _=128,t=160,d=192,c=208,s=224,U=240;var T=(e=>(e[e.BOOL=1]="BOOL",e[e.I8=2]="I8",e[e.I16=3]="I16",e[e.I32=4]="I32",e[e.I64=5]="I64",e[e.I128=6]="I128",e[e.U8=7]="U8",e[e.U16=8]="U16",e[e.U32=9]="U32",e[e.U64=10]="U64",e[e.U128=11]="U128",e[e.STRING=12]="STRING",e[e.ARRAY=32]="ARRAY",e[e.TUPLE=33]="TUPLE",e[e.ENUM=34]="ENUM",e[e.MAP=35]="MAP",e[e.ANY=64]="ANY",e[e.BYTES=65]="BYTES",e[e.UNIT=66]="UNIT",e[e.ADDRESS=_]="ADDRESS",e[e.GLOBAL_ADDRESS=_+1]="GLOBAL_ADDRESS",e[e.INTERNAL_ADDRESS=_+2]="INTERNAL_ADDRESS",e[e.PACKAGE_ADDRESS=_+3]="PACKAGE_ADDRESS",e[e.COMPONENT_ADDRESS=_+4]="COMPONENT_ADDRESS",e[e.RESOURCE_ADDRESS=_+5]="RESOURCE_ADDRESS",e[e.OWN=t]="OWN",e[e.BUCKET=t+1]="BUCKET",e[e.FUNGIBLE_BUCKET=t+2]="FUNGIBLE_BUCKET",e[e.NON_FUNGIBLE_BUCKET=t+3]="NON_FUNGIBLE_BUCKET",e[e.PROOF=t+4]="PROOF",e[e.FUNGIBLE_PROOF=t+5]="FUNGIBLE_PROOF",e[e.NON_FUNGIBLE_PROOF=t+6]="NON_FUNGIBLE_PROOF",e[e.VAULT=t+7]="VAULT",e[e.FUNGIBLE_VAULT=t+8]="FUNGIBLE_VAULT",e[e.NON_FUNGIBLE_VAULT=t+9]="NON_FUNGIBLE_VAULT",e[e.KEY_VALUE_STORE=t+10]="KEY_VALUE_STORE",e[e.GLOBAL_ADDRESS_RESERVATION=t+11]="GLOBAL_ADDRESS_RESERVATION",e[e.DECIMAL=d]="DECIMAL",e[e.PRECISE_DECIMAL=d+1]="PRECISE_DECIMAL",e[e.NON_FUNGIBLE_LOCAL_ID=d+2]="NON_FUNGIBLE_LOCAL_ID",e[e.NON_FUNGIBLE_GLOBAL_ID=d+3]="NON_FUNGIBLE_GLOBAL_ID",e[e.INSTANT=d+4]="INSTANT",e[e.UTC_DATE_TIME=d+5]="UTC_DATE_TIME",e[e.URL=d+6]="URL",e[e.ORIGIN=d+7]="ORIGIN",e[e.PUBLIC_KEY=c]="PUBLIC_KEY",e[e.SECP256K1_PUBLIC_KEY=c+1]="SECP256K1_PUBLIC_KEY",e[e.ED25519_PUBLIC_KEY=c+2]="ED25519_PUBLIC_KEY",e[e.PUBLIC_KEY_HASH=c+8]="PUBLIC_KEY_HASH",e[e.SECP256K1_PUBLIC_KEY_HASH=c+9]="SECP256K1_PUBLIC_KEY_HASH",e[e.ED25519_PUBLIC_KEY_HASH=c+10]="ED25519_PUBLIC_KEY_HASH",e[e.ACCESS_RULE=s]="ACCESS_RULE",e[e.ACCESS_RULE_NODE=s+1]="ACCESS_RULE_NODE",e[e.ACCESS_RULE_NODE_LIST=s+2]="ACCESS_RULE_NODE_LIST",e[e.PROOF_RULE=s+3]="PROOF_RULE",e[e.RESOURCE_OR_NON_FUNGIBLE=s+4]="RESOURCE_OR_NON_FUNGIBLE",e[e.RESOURCE_OR_NON_FUNGIBLE_LIST=s+5]="RESOURCE_OR_NON_FUNGIBLE_LIST",e[e.OWNER_ROLE=s+6]="OWNER_ROLE",e[e.ROLE_KEY=s+7]="ROLE_KEY",e[e.MODULE_ID=U]="MODULE_ID",e[e.ATTACHED_MODULE_ID=U+1]="ATTACHED_MODULE_ID",e[e.ROYALTY_AMOUNT=U+2]="ROYALTY_AMOUNT",e))(T||{});function I(e){return{kind:"Enum",variants:new Map([[0,{discriminatorValue:0,elementKinds:[],name:"None"}],[1,{discriminatorValue:1,elementKinds:[e],name:"Some"}]])}}export{h as S,g};
